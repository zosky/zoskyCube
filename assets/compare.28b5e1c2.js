import{_ as q,c as C,y as _,b as v,f as k,g as s,G as z,r as f,o as j,ah as E,ag as W,ak as $,d as t,h as D,v as M,i as R,av as A,n as p,t as r,a1 as B}from"./index.be84e892.js";import{C as L,A as K,c as O,d as T,D as I}from"./index.55b785f6.js";const N={class:"chart-wrapper"},G={__name:"SourcePieChart",props:{data:{type:Array,required:!0}},setup(S){L.register(K,O,T);const w=S,i={vodVote:"rgb(59, 130, 246)",squadRush:"rgb(16, 185, 129)",art:"rgb(251, 146, 60)",manual:"rgb(168, 85, 247)",storePurchases:"rgb(236, 72, 153)",vouchers:"rgb(234, 179, 8)"},d=C(()=>{const a={};w.data.forEach(o=>{a[o.source]||(a[o.source]=0),a[o.source]+=o.amount});const l=Object.keys(a);return{labels:l.map(o=>h(o)),datasets:[{data:l.map(o=>a[o]),backgroundColor:l.map(o=>i[o]||"rgb(156, 163, 175)"),borderWidth:2,borderColor:"#1e293b"}]}}),x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"rgb(255, 255, 255)",padding:15}},tooltip:{callbacks:{label:function(a){const l=a.label||"",o=a.parsed||0,m=a.dataset.data.reduce((y,b)=>y+b,0),u=Math.round(o/m*100);return`${l}: ${o} zC (${u}%)`}}}}};function h(a){return{vodVote:"VOD Vote",squadRush:"Squad Rush",art:"AI Art",manual:"Manual",storePurchases:"Store",vouchers:"Vouchers"}[a]||a}return(a,l)=>(_(),v("div",N,[k(s(I),{data:s(d),options:x},null,8,["data"])]))}},F=q(G,[["__scopeId","data-v-efdb1312"]]),H={class:"compare-page min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 p-4"},J={class:"max-w-6xl mx-auto"},Q={class:"bg-white/10 backdrop-blur-md rounded-xl p-6 ring-1 ring-white/20 mb-8"},X={class:"grid md:grid-cols-3 gap-4 items-end"},Y={class:"flex flex-col gap-2"},Z={class:"flex flex-col gap-2"},tt={key:0,class:"flex justify-center items-center h-64"},et={key:1,class:"space-y-6"},st={class:"bg-white/10 backdrop-blur-md rounded-xl p-6 ring-1 ring-white/20"},ot={class:"flex items-center justify-between gap-4"},nt={class:"text-lg text-white/90 mb-2"},lt={class:"text-3xl font-bold text-yellow-400"},at={class:"text-lg text-white/90 mb-2"},rt={class:"text-3xl font-bold text-yellow-400"},it={class:"text-center text-white/70 text-sm mt-4"},dt={class:"bg-white/10 backdrop-blur-md rounded-xl p-6 ring-1 ring-white/20"},ct={class:"flex items-center justify-between gap-4"},ut={class:"text-lg text-white/90 mb-2"},gt={class:"text-3xl font-bold text-white"},xt={class:"text-lg text-white/90 mb-2"},ht={class:"text-3xl font-bold text-white"},bt={class:"bg-white/10 backdrop-blur-md rounded-xl p-6 ring-1 ring-white/20"},pt={class:"flex items-center justify-between gap-4"},ft={class:"text-lg text-white/90 mb-2"},_t={class:"text-3xl font-bold text-green-400"},vt={class:"text-lg text-white/90 mb-2"},mt={class:"text-3xl font-bold text-green-400"},wt={class:"grid md:grid-cols-2 gap-6"},yt={class:"bg-white/10 backdrop-blur-md rounded-xl p-6 ring-1 ring-white/20"},Ct={class:"text-xl font-bold text-white mb-4 text-center"},kt={class:"bg-white/10 backdrop-blur-md rounded-xl p-6 ring-1 ring-white/20"},St={class:"text-xl font-bold text-white mb-4 text-center"},Vt={key:2,class:"bg-white/10 backdrop-blur-md rounded-xl p-12 ring-1 ring-white/20 text-center text-white"},Rt={__name:"compare",setup(S){const w=z(),i=f(""),d=f(""),x=f([]),h=f([]),a=f(!1);j(()=>{var e;const n=((e=w.query.users)==null?void 0:e.split(","))||[];n[0]&&(i.value=n[0]),n[1]&&(d.value=n[1]),i.value&&d.value&&b()});const l=C(()=>m(x.value)),o=C(()=>m(h.value));function m(n){const e=n.reduce((P,U)=>P+U.amount,0),c=n.length,g=c>0?Math.round(e/c):0;return{total:e,count:c,avg:g}}function u(n,e){return n>e?"bg-green-500/20 ring-2 ring-green-500 scale-105":n<e?"bg-red-500/10 ring-1 ring-red-500/50":"bg-white/5 ring-1 ring-white/20"}function y(n,e){const c=Math.max(n,e);return c===0?0:Math.round(Math.abs(n-e)/c*100)}async function b(){if(!(!i.value||!d.value)){a.value=!0;try{const[n,e]=await Promise.all([V(i.value),V(d.value)]);x.value=n,h.value=e}catch(n){console.error("Error loading comparison data:",n)}finally{a.value=!1}}}async function V(n){const e=E(W(B,"user_handouts",n,"history"));return(await $(e)).docs.map(g=>({id:g.id,...g.data()}))}return(n,e)=>{const c=F;return _(),v("div",H,[t("div",J,[e[12]||(e[12]=t("h1",{class:"text-4xl font-bold text-white text-center mt-8 mb-8"},"\u{1F4CA} Compare Users",-1)),t("div",Q,[t("div",X,[t("div",Y,[e[2]||(e[2]=t("label",{class:"text-white/90 font-semibold"},"User 1:",-1)),D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=g=>R(i)?i.value=g:null),onKeyup:A(b,["enter"]),placeholder:"Username",class:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,544),[[M,s(i)]])]),t("div",Z,[e[3]||(e[3]=t("label",{class:"text-white/90 font-semibold"},"User 2:",-1)),D(t("input",{"onUpdate:modelValue":e[1]||(e[1]=g=>R(d)?d.value=g:null),onKeyup:A(b,["enter"]),placeholder:"Username",class:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400"},null,544),[[M,s(d)]])]),t("button",{onClick:b,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-semibold"}," Compare ")])]),s(a)?(_(),v("div",tt,[...e[4]||(e[4]=[t("div",{class:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-400"},null,-1)])])):s(x).length>0&&s(h).length>0?(_(),v("div",et,[t("div",st,[e[6]||(e[6]=t("h3",{class:"text-xl font-bold text-white mb-4 text-center"},"Total Winnings",-1)),t("div",ot,[t("div",{class:p(["flex-1 p-6 rounded-lg text-center transition-all",u(s(l).total,s(o).total)])},[t("div",nt,r(s(i)),1),t("div",lt,r(s(l).total.toLocaleString())+" zC",1)],2),e[5]||(e[5]=t("div",{class:"text-2xl font-bold text-white/40"},"VS",-1)),t("div",{class:p(["flex-1 p-6 rounded-lg text-center transition-all",u(s(o).total,s(l).total)])},[t("div",at,r(s(d)),1),t("div",rt,r(s(o).total.toLocaleString())+" zC",1)],2)]),t("div",it," Difference: "+r(Math.abs(s(l).total-s(o).total).toLocaleString())+" zC ("+r(y(s(l).total,s(o).total))+"%) ",1)]),t("div",dt,[e[8]||(e[8]=t("h3",{class:"text-xl font-bold text-white mb-4 text-center"},"Total Wins",-1)),t("div",ct,[t("div",{class:p(["flex-1 p-6 rounded-lg text-center transition-all",u(s(l).count,s(o).count)])},[t("div",ut,r(s(i)),1),t("div",gt,r(s(l).count),1)],2),e[7]||(e[7]=t("div",{class:"text-2xl font-bold text-white/40"},"VS",-1)),t("div",{class:p(["flex-1 p-6 rounded-lg text-center transition-all",u(s(o).count,s(l).count)])},[t("div",xt,r(s(d)),1),t("div",ht,r(s(o).count),1)],2)])]),t("div",bt,[e[10]||(e[10]=t("h3",{class:"text-xl font-bold text-white mb-4 text-center"},"Avg Per Win",-1)),t("div",pt,[t("div",{class:p(["flex-1 p-6 rounded-lg text-center transition-all",u(s(l).avg,s(o).avg)])},[t("div",ft,r(s(i)),1),t("div",_t,r(s(l).avg)+" zC",1)],2),e[9]||(e[9]=t("div",{class:"text-2xl font-bold text-white/40"},"VS",-1)),t("div",{class:p(["flex-1 p-6 rounded-lg text-center transition-all",u(s(o).avg,s(l).avg)])},[t("div",vt,r(s(d)),1),t("div",mt,r(s(o).avg)+" zC",1)],2)])]),t("div",wt,[t("div",yt,[t("h3",Ct,r(s(i))+"'s Sources",1),k(c,{data:s(x)},null,8,["data"])]),t("div",kt,[t("h3",St,r(s(d))+"'s Sources",1),k(c,{data:s(h)},null,8,["data"])])])])):(_(),v("div",Vt,[...e[11]||(e[11]=[t("p",{class:"text-xl"},"Enter two usernames to compare their stats",-1)])]))])])}}};export{Rt as default};
