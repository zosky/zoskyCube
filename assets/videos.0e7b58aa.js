import{_ as T,q as I,j as H,c as p,o as r,a as i,b as t,F as $,r as C,n as w,t as u,f as D,d as L,w as F,u as m,e as R}from"./index.a096edd2.js";const q={class:"bg-gray-800 p-4 rounded-lg"},W={class:"grid grid-cols-7 gap-2 items-start"},U={key:0,class:"month-label absolute text-xs font-bold uppercase text-purple-400"},z={key:0,class:"ml-1 bg-red-600 text-white rounded-full px-2 text-xs font-normal"},G=["src","alt","onError"],Z={key:0,class:"text-center mt-4"},J={__name:"VodsCalendar",setup(N){const A=I("gameStore"),{youtubeVods:h,steamNames:B}=A,k=H(!1),M=p(()=>h.value.reduce((c,d)=>{const l=new Date(d.date).toISOString().split("T")[0];return c[l]||(c[l]=[]),c[l].push(d),c},{})),g=p(()=>h.value.length===0?new Date:new Date(Math.min(...h.value.map(c=>new Date(c.date))))),b=p(()=>{if(h.value.length===0)return[];const c=[],d=new Date(g.value);d.setDate(1);const l=new Date;let n=new Date(l);const v=n.getDay();v!==0&&n.setDate(n.getDate()+(7-v));const x=new Date(d),j=x.getDay(),s=j===0?6:j-1;x.setDate(x.getDate()-s);let e=[];for(;n>=x;){for(let o=0;o<7;o++){const a=n.toISOString().split("T")[0],f=n.getDay();e.push({date:a,dayOfMonth:n.getDate(),isWeekend:f===0||f===6,isFirstOfMonth:n.getDate()===1,monthName:n.toLocaleString("default",{month:"short"}),isToday:a===new Date().toISOString().split("T")[0],games:M.value[a]||[]}),n.setDate(n.getDate()-1)}c.push(...e.reverse()),e=[]}return c}),V=p(()=>k.value?b.value:b.value.slice(0,21)),y=p(()=>Math.max(0,b.value.length-21));function _(c){var n;const d=(n=Object.entries(B.value).find(([v,x])=>x===c))==null?void 0:n[0];if(d)return`https://cdn.akamai.steamstatic.com/steam/apps/${d}/header.jpg`;const l=h.value.find(v=>v.game===c);return l?`https://img.youtube.com/vi/${l.id}/mqdefault.jpg`:""}function S(c,d){d.target.src=`https://img.youtube.com/vi/${c}/mqdefault.jpg`}return(c,d)=>(r(),i("div",q,[d[1]||(d[1]=t("h2",{class:"text-2xl font-bold mb-4 text-white"},"VODs Calendar",-1)),d[2]||(d[2]=t("div",{class:"grid grid-cols-7 gap-1 text-center text-xs text-gray-400 mb-2"},[t("div",null,"Mon"),t("div",null,"Tue"),t("div",null,"Wed"),t("div",null,"Thu"),t("div",null,"Fri"),t("div",null,"Sat"),t("div",null,"Sun")],-1)),t("div",W,[(r(!0),i($,null,C(V.value,l=>(r(),i("div",{key:l.date,class:w(["relative rounded-md p-1 overflow-hidden  ",l.isWeekend?"bg-blue-400/10 shadow-blue-400 shadow-md":"bg-gray-900 shadow-blue-800 shadow-sm",l.isFirstOfMonth?"month-start":"","h-32"])},[l.isFirstOfMonth?(r(),i("div",U,u(l.monthName),1)):D("",!0),t("div",{class:w(["absolute top-1 left-1 text-xs font-bold",l.isToday?"text-blue-400":"text-gray-500"])},[L(u(l.dayOfMonth)+" ",1),l.games.length?(r(),i("label",z,u(l.games.length)+"v ",1)):D("",!0)],2),l.games.length?(r(),i("div",{key:1,class:w(["games-container mt-4 h-full overflow-y-auto",{"grid grid-cols-2 gap-1":l.games.length>=4}])},[(r(!0),i($,null,C(l.games,n=>(r(),i("div",{key:n.id,class:w([l.games.length<4?"mb-1":"","aspect-[460/215] w-full"])},[t("img",{src:_(n.game),alt:n.game,class:"w-full h-full object-cover rounded-sm",onError:v=>S(n.id,v)},null,40,G)],2))),128))],2)):D("",!0)],2))),128))]),y.value>0?(r(),i("div",Z,[t("button",{onClick:d[0]||(d[0]=l=>k.value=!k.value),class:"text-blue-400 hover:text-blue-300"}," Show "+u(y.value)+" more days ",1)])):D("",!0)]))}},K=T(J,[["__scopeId","data-v-4db7fa7e"]]);const P={class:"min-h-screen bg-gray-900 text-white p-4 pt-10"},Q={key:0,class:"flex justify-center items-center h-64"},X={key:1,class:"text-red-400 text-center p-4"},Y={key:2,class:"max-w-full"},tt={key:0,class:"mb-8 mx-auto"},et={class:"xl:flex xl:gap-6"},st={class:"xl:w-3/4"},ot={class:"aspect-video bg-black rounded-lg overflow-hidden mb-4"},at=["src"],lt={class:"bg-gray-800 rounded-lg p-4"},nt={class:"text-xl font-bold mb-2"},rt={class:"text-gray-300 text-sm"},it={key:0,class:"xl:w-1/4 mt-6 xl:mt-0"},ct={class:"bg-gray-800 rounded-lg overflow-hidden h-full"},dt={class:"p-4 border-b border-gray-700"},ut={class:"text-lg font-semibold flex items-center gap-2"},gt={class:"text-sm text-gray-400"},mt={class:"relative xl:h-[calc(100vh-20rem)]"},ht={class:"h-full xl:h-[calc(100vh-20rem)] overflow-y-auto scrollable-related p-4"},ft={class:"space-y-3 h-full"},vt=["onClick"],_t={class:"flex flex-col space-y-2"},pt={class:"relative w-full h-20 bg-black rounded overflow-hidden"},bt=["src","alt"],xt={class:"text-sm text-gray-300 font-medium"},yt={class:"overflow-x-auto pb-4"},wt={class:"flex gap-6",style:{width:"max-content"}},Dt={class:"relative"},kt=["onClick"],Vt=["src","alt"],St={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/90 to-transparent p-4"},jt={class:"text-lg font-bold text-white mb-2"},$t={class:"flex justify-between items-center text-sm"},Ct={class:"flex items-center gap-1 text-gray-300"},Mt={class:"flex items-center gap-1 text-gray-400"},Ot={class:"flex justify-between items-center"},At={class:"text-xs text-gray-400"},Bt={class:"text-xs text-gray-400"},Ht={class:"relative h-96"},Lt={class:"h-full overflow-y-auto scrollable-videos p-3"},Tt={class:"space-y-2"},It=["onClick"],Nt={class:"flex items-center space-x-3"},Et={class:"relative w-16 h-12 bg-black rounded overflow-hidden flex-shrink-0"},Ft=["src","alt"],Rt={class:"flex-1 min-w-0"},qt={class:"text-sm text-gray-300 truncate font-medium"},Wt={class:"flex justify-between items-center"},Ut={class:"text-xs text-gray-400"},zt={class:"text-xs text-gray-400"},Gt={class:"mt-8 text-center text-gray-400"},Zt={__name:"videos",setup(N){const A=I("gameStore"),{youtubeVods:h,steamNames:B,isLoading:k,error:M}=A,g=H(null),b=H(null);p(()=>{let s=[...h.value];return b.value&&(s=s.filter(e=>e.game===b.value)),s.sort((e,o)=>new Date(o.date)-new Date(e.date))});const V=p(()=>[...new Set(h.value.map(e=>e.game))].sort((e,o)=>{const a=_(e),f=_(o);return new Date(f.date)-new Date(a.date)}));function y(s){return h.value.filter(e=>e.game===s).sort((e,o)=>new Date(o.date)-new Date(e.date))}function _(s){return y(s).sort((o,a)=>new Date(a.date)-new Date(o.date))[0]}function S(s){g.value=s}function c(s){if(!s)return"Unknown date";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return s}}F(h,s=>{if(s.length>0&&!g.value){const e=[...s].sort((o,a)=>new Date(a.date)-new Date(o.date));g.value=e[0]}},{immediate:!0}),p(()=>b.value?[b.value]:V.value);const d=p(()=>h.value.length);function l(s){var a;const e=(a=Object.entries(B.value).find(([f,O])=>O===s))==null?void 0:a[0];return e?`https://cdn.akamai.steamstatic.com/steam/apps/${e}/header.jpg`:`https://img.youtube.com/vi/${_(s).id}/maxresdefault.jpg`}function n(s){const e=s.target,o=e.alt,a=_(o);e.src=`https://img.youtube.com/vi/${a.id}/maxresdefault.jpg`}function v(){return g.value?h.value.filter(s=>s.game===g.value.game).sort((s,e)=>new Date(e.date)-new Date(s.date)):[]}function x(s){if(!s)return"N/A";try{return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return s}}function j(s){if(s==null)return"";const e=Math.floor(s/3600),o=Math.floor(s%3600/60),a=Math.floor(s%60),f=e>0?`${e}:`:"",O=o.toString().padStart(2,"0"),E=a.toString().padStart(2,"0");return`${f}${O}:${E}`}return(s,e)=>(r(),i("div",P,[m(k)?(r(),i("div",Q,[...e[0]||(e[0]=[t("div",{class:"text-lg"},"Loading videos...",-1)])])):m(M)?(r(),i("div",X," Error: "+u(m(M)),1)):(r(),i("div",Y,[R(K,{class:"my-4"}),m(g)?(r(),i("div",tt,[t("div",et,[t("div",st,[t("div",ot,[t("iframe",{src:`https://www.youtube.com/embed/${m(g).id}?autoplay=0&rel=0`,class:"w-full h-full",frameborder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,at)]),t("div",lt,[t("h2",nt,u(m(g).game),1),t("p",rt,u(c(m(g).date)),1)])]),m(g)?(r(),i("div",it,[t("div",ct,[t("div",dt,[t("h3",ut,[e[1]||(e[1]=t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"})],-1)),L(" More "+u(m(g).game),1)]),t("p",gt,u(v().length)+" videos",1)]),t("div",mt,[t("div",ht,[t("div",ft,[(r(!0),i($,null,C(v(),o=>{var a;return r(),i("div",{key:o.id,class:w(["bg-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-600 transition-colors group",{"ring-2 ring-blue-500 bg-blue-900/30":((a=m(g))==null?void 0:a.id)===o.id}]),onClick:f=>S(o)},[t("div",_t,[t("div",pt,[t("img",{src:`https://img.youtube.com/vi/${o.id}/mqdefault.jpg`,alt:o.game,class:"w-full h-full object-cover"},null,8,bt),e[2]||(e[2]=t("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50"},[t("div",{class:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-white ml-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M8 5v10l8-5-8-5z"})])])],-1))]),t("div",null,[t("p",xt,u(c(o.date)),1)])])],10,vt)}),128))])]),e[3]||(e[3]=t("div",{class:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none"},null,-1))])])])):D("",!0)])])):D("",!0),t("div",yt,[t("div",wt,[(r(!0),i($,null,C(m(V),o=>(r(),i("div",{key:o,class:"flex-none w-80 bg-gray-800 rounded-lg overflow-hidden"},[t("div",Dt,[t("div",{class:"w-full h-48 bg-black cursor-pointer group",onClick:a=>S(_(o))},[t("img",{src:l(o),alt:o,class:"w-full h-full object-cover",onError:n},null,40,Vt),e[4]||(e[4]=t("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50"},[t("div",{class:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M8 5v10l8-5-8-5z"})])])],-1))],8,kt),t("div",St,[t("h3",jt,u(o),1),t("div",$t,[t("div",Ct,[e[5]||(e[5]=t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"})],-1)),L(" "+u(y(o).length),1)]),t("div",Mt,[e[6]||(e[6]=t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"})],-1)),t("div",Ot,[t("p",At,u(x(_(o).date)),1),t("p",Bt,u(j(_(o).duration)),1)])])])])]),t("div",Ht,[t("div",Lt,[t("div",Tt,[(r(!0),i($,null,C(y(o),a=>{var f;return r(),i("div",{key:a.id,class:w(["bg-gray-700 rounded-lg p-2 cursor-pointer hover:bg-gray-600 transition-colors group",{"ring-2 ring-blue-500 bg-blue-900/30":((f=m(g))==null?void 0:f.id)===a.id}]),onClick:O=>S(a)},[t("div",Nt,[t("div",Et,[t("img",{src:`https://img.youtube.com/vi/${a.id}/mqdefault.jpg`,alt:a.game,class:"w-full h-full object-cover"},null,8,Ft),e[7]||(e[7]=t("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50"},[t("div",{class:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center"},[t("svg",{class:"w-3 h-3 text-white ml-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M8 5v10l8-5-8-5z"})])])],-1))]),t("div",Rt,[t("p",qt,u(a.game),1),t("div",Wt,[t("p",Ut,u(c(a.date)),1)]),t("p",zt,u(j(a.duration)),1)])])],10,It)}),128))])]),e[8]||(e[8]=t("div",{class:"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none"},null,-1))])]))),128))])]),t("div",Gt,[t("p",null,u(m(V).length)+" games \u2022 "+u(m(d))+" total videos",1)])]))]))}},Kt=T(Zt,[["__scopeId","data-v-36a34088"]]);export{Kt as default};
