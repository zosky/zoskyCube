import{_ as Re,A as $e,G as Ne,r as p,c as j,o as Ae,H as C,I as Le,b as r,d as t,e as w,f as d,g as n,J as Q,n as I,x as me,K as X,j as u,M as Pe,k as $,L as A,N as Z,t as v,O as ee,Q as te,R as fe,U as ve,V as he,W as ze,X as Ve,h as Te,Y as Ee,F as Me,q as Be,Z as z,$ as je,a0 as F,a1 as O,a2 as q,a3 as W,a4 as H,y as a,P as se}from"./index.be84e892.js";import{b as we}from"./route-block.6a611cbf.js";const Fe={class:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 p-4"},Oe={class:"max-w-4xl mx-auto"},qe={class:"from-gray-900/30 to-gray-950/30 ring-1 ring-gray-500 shadow-gray-500 shadow-sm bg-gradient-to-br backdrop-blur-md rounded-xl p-6 mb-8"},We={class:"flex flex-col justify-center gap-2 items-center"},He={class:"text-center flex flex-row items-center gap-1 min-w-max"},Je={class:"flex flex-col sm:flex-row gap-1 items-center text-center"},Ye={class:"flex flex-row gap-1 items-center"},Ge={class:"flex flex-row gap-1 items-center"},Ke={class:"grid md:grid-cols-3 gap-6 mb-8"},Qe={class:"from-blue-800 to-blue-950 ring-1 ring-blue-600 shadow-blue-500 shadow-md bg-gradient-to-br backdrop-blur-md rounded-xl p-6 relative min-w-0"},Xe={class:"flex flex-row justify-center -space-x-8 items-center scale-[2]"},Ze=["src"],et={class:"mt-16 text-center"},tt=["open"],st=["disabled"],ot=["disabled"],at={key:2,class:"mt-4 pt-4 border-t border-white/10 text-left"},it={class:"text-white/80 text-xs space-y-1"},rt={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2"},nt={class:"flex items-center gap-2 min-w-0 flex-1"},lt={class:"truncate text-[10px] sm:text-xs"},ct={class:"flex items-center gap-2 flex-row-reverse min-w-0 flex-1"},dt=["href"],ut={key:1,class:"truncate text-[10px] sm:text-xs"},mt={key:0,class:"flex items-center gap-2 text-white/60"},ft={class:"text-[10px] sm:text-xs"},vt={class:"flex flex-row justify-center -space-x-8 items-center scale-[2]"},ht=["src"],wt={class:"mt-16 text-center"},pt=["open"],xt={key:0,class:"space-y-2"},gt=["disabled"],yt={key:1,class:"space-y-2"},_t=["disabled"],bt=["disabled"],kt={key:2,class:"mt-4 pt-4 border-t border-white/10 text-left"},St={class:"text-white/80 text-xs space-y-1"},Ut={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2"},Ct={class:"flex items-center gap-2 min-w-0 flex-1"},It={class:"truncate text-[10px] sm:text-xs"},Dt={class:"flex items-center gap-2 flex-row-reverse min-w-0 flex-1"},Rt={class:"truncate text-[10px] sm:text-xs"},$t={key:0,class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2"},Nt={key:0,class:"flex items-center gap-2 min-w-0 flex-1"},At={class:"truncate text-[10px] sm:text-xs"},Lt={key:1,class:"flex items-center gap-2 flex-row-reverse min-w-0"},Pt={class:"truncate text-[10px] sm:text-xs"},zt={key:1,class:"flex items-center gap-2 text-white/60"},Vt={class:"text-[10px] sm:text-xs"},Tt={class:"from-pink-800 to-pink-950 ring-1 ring-pink-600 shadow-pink-500 shadow-md bg-gradient-to-br backdrop-blur-md rounded-xl p-6 relative min-w-0"},Et={class:"flex flex-row justify-center -space-x-8 items-center scale-[2]"},Mt=["src"],Bt={class:"mt-16 text-center"},jt=["open"],Ft=["disabled"],Ot=["disabled"],qt={key:2,class:"mt-4 pt-4 border-t border-white/10 text-left"},Wt={class:"text-white/80 text-xs space-y-1"},Ht={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2"},Jt={class:"flex items-center gap-2 min-w-0 flex-1"},Yt={class:"truncate text-[10px] sm:text-xs"},Gt={class:"flex items-center gap-2 flex-row-reverse min-w-0 flex-1"},Kt={class:"truncate text-[10px] sm:text-xs"},Qt={key:0,class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-1 sm:gap-2"},Xt={key:0,class:"flex items-center gap-2 min-w-0 flex-1"},Zt={class:"truncate text-[10px] sm:text-xs"},es={key:1,class:"flex items-center gap-2 flex-row-reverse min-w-0 flex-1"},ts={class:"truncate text-[10px] sm:text-xs"},ss={key:1,class:"flex items-center gap-2 text-white/60"},os={class:"text-[10px] sm:text-xs"},as={key:3,class:"mt-4 pt-4 border-t border-white/10"},is={class:"flex gap-2"},rs=["disabled"],ns={value:"",disabled:"",class:"bg-gray-800 text-gray-400"},ls=["value"],cs=["disabled"],ds={key:1},us={key:0,class:"text-green-400 text-xs mt-1"},ms={key:1,class:"text-white/60 text-xs mt-1"},fs={key:0,class:"from-green-400/50 to-green-950/80 bg-gradient-to-br shadow-lg shadow-green-950 backdrop-blur-md rounded-xl p-6 text-center"},vs={class:"text-2xl font-semibold text-white"},hs={class:"text-white/60 text-sm"},ws={key:1,class:"bg-white/10 backdrop-blur-md rounded-xl p-6 text-center"},ps={key:2,class:"flex flex-col items-center justify-center py-8"},xs={class:"text-red-400 text-lg mb-4"},pe={__name:"auth",setup(gs){const J=new URLSearchParams(window.location.search).get("ref");J&&(localStorage.setItem("referralRef",J),console.log(`\u{1F4BE} [IMMEDIATE] Stored referral param: ${J}`));const oe=$e(),ae=Ne(),k=p(""),S=p(!1),L=p(!1),ie=p([]),V=p(!1),xe=async()=>{V.value=!0;try{const e=await fetch("https://us-central1-zoskycube-bossbattle.cloudfunctions.net/whitelistedUsernames");if(e.ok){const l=await e.json();if(l.success&&l.usernames){ie.value=l.usernames,console.log(`\u2705 Loaded ${l.count} whitelisted usernames for referral dropdown`);const i=ae.query.ref||new URLSearchParams(window.location.search).get("ref")||localStorage.getItem("referralRef");if(i&&!S.value){const c=l.usernames.find(f=>f.toLowerCase()===i.toLowerCase());c?(k.value=c,console.log(`\u{1F517} Pre-populated referral from URL/storage: ${c}`)):console.log(`\u26A0\uFE0F Referral param "${i}" not found in whitelist`)}}}}catch(o){console.error("Failed to fetch whitelisted usernames:",o)}finally{V.value=!1}},T="https://us-central1-zoskycube-bossbattle.cloudfunctions.net";console.log("DEV mode:",!1),console.log("Cloud Functions Base URL:",T);const E={twitch:`${T}/twitchAuthorizeV2`,discord:`${T}/discordAuthorizeV2`,steam:`${T}/steamAuthorizeV2`};console.log("OAuth Endpoints:",E);const x=p({steam:!1,discord:!1,twitch:!1,discordVerify:!1}),y=p(!1),M=p(null),s=p(null),Y=p(""),G=p(!1),g=p(null),B=p(!1),h=p(""),D=j(()=>{var o;return!!((o=s.value)!=null&&o.steam)}),R=j(()=>{var o;return!!((o=s.value)!=null&&o.discord)}),U=j(()=>{var o;return!!((o=s.value)!=null&&o.twitch)}),ge=j(()=>D.value&&R.value&&U.value),ye=()=>{var l,i,c;x.value.steam=!0,C("oauth_start",{event_category:"authentication",service:"steam",twitch_username:((i=(l=s.value)==null?void 0:l.twitch)==null?void 0:i.username)||"anonymous"});const o=encodeURIComponent(window.location.origin),e=localStorage.getItem("linkUuid")||((c=z.currentUser)==null?void 0:c.uid)||"";window.location.href=`${E.steam}?return_origin=${o}&link_uuid=${e}`},_e=()=>{var l,i,c;x.value.discord=!0,C("oauth_start",{event_category:"authentication",service:"discord",twitch_username:((i=(l=s.value)==null?void 0:l.twitch)==null?void 0:i.username)||"anonymous"});const o=encodeURIComponent(window.location.origin),e=localStorage.getItem("linkUuid")||((c=z.currentUser)==null?void 0:c.uid)||"";window.location.href=`${E.discord}?return_origin=${o}&link_uuid=${e}`},be=()=>{var l;x.value.twitch=!0,C("oauth_start",{event_category:"authentication",service:"twitch",twitch_username:"anonymous"});const o=encodeURIComponent(window.location.origin),e=localStorage.getItem("linkUuid")||((l=z.currentUser)==null?void 0:l.uid)||"";window.location.href=`${E.twitch}?return_origin=${o}&link_uuid=${e}`},ke=async()=>{var c,f,m,_;const o=new URLSearchParams(window.location.search),e=o.get("token"),l=o.get("success"),i=o.get("error");if(i){Y.value=`Authentication failed: ${decodeURIComponent(i)}`,C("oauth_complete",{event_category:"authentication",service:l||"unknown",success:!1,error:decodeURIComponent(i)}),oe.replace("/auth");return}if(e&&l){G.value=!0;try{console.log("\u{1F525} Received custom token from Cloud Function"),console.log("\u{1F525} Provider:",l);const b=await je(z,e);M.value=b.user,console.log("\u{1F525} Successfully signed in with custom token"),console.log("\u{1F525} User ID:",M.value.uid),await P(M.value.uid),C("oauth_complete",{event_category:"authentication",service:l,twitch_username:((f=(c=s.value)==null?void 0:c.twitch)==null?void 0:f.username)||"anonymous",success:!0}),D.value&&R.value&&U.value&&C("whitelist_complete",{event_category:"authentication",twitch_username:((_=(m=s.value)==null?void 0:m.twitch)==null?void 0:_.username)||"anonymous"}),oe.replace("/auth")}catch(b){console.error("\u{1F525} Error signing in with custom token:",b),Y.value="Failed to complete authentication: "+b.message}finally{G.value=!1}}},P=async o=>{y.value=!0;try{localStorage.getItem("linkUuid")||localStorage.setItem("linkUuid",o);const e=F(O,"account_links",o),l=await q(e);if(!l.exists()){s.value=null;return}const i=l.data(),c={};if(i.steamId&&i.steamId!=="not-yet"){const f=F(O,"steam_profiles",i.steamId),m=await q(f);m.exists()&&(c.steam=m.data())}if(i.discordId&&i.discordId!=="not-yet"){const f=F(O,"discord_profiles",i.discordId),m=await q(f);m.exists()&&(c.discord=m.data()),B.value=i.discordInServer||!1,i.discordVerified!==void 0?g.value={verified:i.discordVerified,inServer:i.discordInServer,hasMemberRole:i.discordHasMemberRole,hasNoobRole:i.discordHasNoobRole,message:i.discordVerified?"\u2705 Discord verified! DoubleCounter complete.":i.discordInServer?"\u23F3 Complete DoubleCounter verification, then check status":"\u23F3 Join server first"}:i.discordInServer&&(g.value={verified:!1,inServer:!0,message:"\u23F3 Complete DoubleCounter verification, then check status"})}if(i.twitchId&&i.twitchId!=="not-yet"){const f=F(O,"twitch_profiles",i.twitchId),m=await q(f);m.exists()&&(c.twitch=m.data())}i.referredBy?(k.value=i.referredBy,S.value=!0):(k.value||(k.value=""),S.value=!1),s.value=c}catch(e){console.error("Error loading user profile:",e),Y.value="Failed to load profile data"}finally{y.value=!1}},K=o=>{if(!o)return"Unknown";const e=o.toDate?o.toDate():new Date(o),i=new Date-e,c=Math.floor(i/1e3),f=Math.floor(c/60),m=Math.floor(f/60),_=Math.floor(m/24);return c<60?"Just now":f<60?`${f} minute${f!==1?"s":""} ago`:m<24?`${m} hour${m!==1?"s":""} ago`:_<30?`${_} day${_!==1?"s":""} ago`:e.toLocaleDateString()},Se=async()=>{if(!!confirm("Are you sure you want to disconnect Steam?"))try{const o=localStorage.getItem("linkUuid");if(!o){console.error("No link UUID found in localStorage"),h.value="Cannot disconnect: No link UUID found";return}await W(H,"disconnectService")({service:"steam",linkUuid:o}),await P(o),!s.value.steam&&!s.value.discord&&!s.value.twitch&&localStorage.removeItem("linkUuid")}catch(o){console.error("Error disconnecting Steam:",o),h.value="Failed to disconnect Steam"}},Ue=async()=>{x.value.discordVerify=!0,h.value="";try{const e=await W(H,"verifyDiscordMembership")();g.value=e.data,console.log("Discord verification result:",e.data)}catch(o){console.error("Error checking Discord status:",o),h.value=`Failed to check Discord status: ${o.message}`,g.value={verified:!1,message:"\u274C Could not check Discord status"}}finally{x.value.discordVerify=!1}},Ce=async()=>{if(!!confirm("Are you sure you want to disconnect Discord?"))try{const o=localStorage.getItem("linkUuid");if(!o){console.error("No link UUID found in localStorage"),h.value="Cannot disconnect: No link UUID found";return}await W(H,"disconnectService")({service:"discord",linkUuid:o}),g.value=null,await P(o),!s.value.steam&&!s.value.discord&&!s.value.twitch&&localStorage.removeItem("linkUuid")}catch(o){console.error("Error disconnecting Discord:",o),h.value="Failed to disconnect Discord"}},Ie=async()=>{if(!!confirm("Are you sure you want to disconnect Twitch?"))try{const o=localStorage.getItem("linkUuid");if(!o){console.error("No link UUID found in localStorage"),h.value="Cannot disconnect: No link UUID found";return}await W(H,"disconnectService")({service:"twitch",linkUuid:o}),await P(o),!s.value.steam&&!s.value.discord&&!s.value.twitch&&localStorage.removeItem("linkUuid")}catch(o){console.error("Error disconnecting Twitch:",o),h.value="Failed to disconnect Twitch"}},De=async()=>{var l,i;const o=k.value.trim().toLowerCase();if(!o){h.value="Please select who referred you";return}if(!((i=(l=s.value)==null?void 0:l.twitch)!=null&&i.username)){h.value="You must be logged into Twitch first";return}const e=s.value.twitch.username.toLowerCase();if(o===e){h.value="You cannot refer yourself";return}L.value=!0,h.value="";try{const c=localStorage.getItem("linkUuid");if(!c){h.value="Cannot save referral: No link UUID found";return}const m=await fetch("https://us-central1-zoskycube-bossbattle.cloudfunctions.net/saveReferral",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({linkUuid:c,referredBy:o})});if(!m.ok){const b=await m.json();throw new Error(b.error||"Failed to save referral")}const _=await m.json();console.log("Referral saved:",_),S.value=!0,localStorage.removeItem("referralRef"),C("referral_link",{event_category:"referral",referrer:o,referred:e,twitch_username:e})}catch(c){console.error("Error saving referral:",c),h.value=`Failed to save referral: ${c.message}`}finally{L.value=!1}};return Ae(()=>{C("auth_page_view",{event_category:"authentication",referrer:document.referrer||"direct"});const o=ae.query.ref||new URLSearchParams(window.location.search).get("ref");o&&(localStorage.setItem("referralRef",o),console.log(`\u{1F4BE} Stored referral param for OAuth: ${o}`)),xe(),ke(),Le(z,async e=>{M.value=e,e?(console.log("\u{1F525} User authenticated:",e.uid),await P(e.uid)):(console.log("\u{1F525} No user authenticated"),s.value=null)})}),(o,e)=>{var l,i,c,f,m,_,b,re,ne,le,ce,de,ue;return a(),r("div",Fe,[t("div",Oe,[e[23]||(e[23]=t("h1",{class:"text-xl sm:text-4xl font-bold text-white/15 text-left mt-8 italic"}," whiteList@zoskyCube ",-1)),t("div",qe,[t("div",We,[t("p",He,[e[2]||(e[2]=w(" to win ",-1)),d(se,{class:"-my-4 w-10 h-10",currency:"zc",title:"zCubes (zC) [@streamElements]"}),e[3]||(e[3]=w(" from ",-1)),d(n(Q),{class:"-my-4 w-8 h-8"}),e[4]||(e[4]=t("span",{class:"hidden sm:inline"},"liveStream miniGames ",-1)),e[5]||(e[5]=w("& ",-1))]),t("div",Je,[t("p",Ye,[e[6]||(e[6]=w(" to use ",-1)),d(se,{class:"-my-4 w-10 h-10",currency:"zb",title:"zBlocks (zB) [@TTV]"}),e[7]||(e[7]=w(" vouchers for more ",-1)),d(se,{class:"-my-4 w-10 h-10",currency:"zc",title:"zCubes (zC) [@streamElements]"})]),e[8]||(e[8]=w(" please connect ",-1)),t("p",Ge,[d(n(me),{class:I(["sm:-my-4 w-12 h-12",D.value?"text-green-400":"text-red-400"])},null,8,["class"]),d(n(X),{class:I(["sm:-my-4 w-12 h-12",R.value?"text-green-400":"text-red-400"])},null,8,["class"]),d(n(Q),{class:I(["sm:-my-4 w-12 h-12",U.value?"text-green-400":"text-red-400"])},null,8,["class"])]),e[9]||(e[9]=w(" all 3... ",-1))])])]),t("div",Ke,[t("div",Qe,[t("div",Xe,[d(n(me),{class:"w-auto h-[5.5em] text-blue-400"}),D.value&&((i=(l=s.value)==null?void 0:l.steam)==null?void 0:i.avatar)?(a(),r("img",{key:0,src:s.value.steam.avatar,alt:"Steam Avatar",class:"w-auto h-[5em] rounded-full border-2 border-blue-400 aspect-square"},null,8,Ze)):u("",!0)]),t("div",et,[t("details",{class:"why",open:!D.value},[...e[10]||(e[10]=[Pe('<summary class="text-white/60 text-sm mt-10 mb-1" data-v-e3c69c93> your WL is my <span class="line-through" data-v-e3c69c93>command</span> <span class="font-bold" data-v-e3c69c93>shoppingList protocol</span></summary><div class="text-xs font-light" data-v-e3c69c93> member WLs <span class="italic" data-v-e3c69c93>-that are public-</span> will be aggregated ... when stuff you want is on sale it moves to the top of my list </div>',2)])],8,tt),D.value?(a(),r("button",{key:1,onClick:Se,class:"w-full py-3 px-4 rounded-lg font-semibold bg-red-600/20 hover:bg-red-600/40 text-red-300 transition-all duration-200",disabled:y.value}," Disconnect ",8,ot)):(a(),r("button",{key:0,onClick:ye,class:"w-full py-3 px-4 rounded-lg font-semibold bg-blue-600 hover:bg-blue-700 text-white transition-all duration-200",disabled:x.value.steam||y.value},[x.value.steam||y.value?(a(),$(n(A),{key:0,class:"inline w-5 h-5 mr-2 animate-spin"})):u("",!0),e[11]||(e[11]=w(" Connect ",-1))],8,st)),D.value&&((c=s.value)==null?void 0:c.steam)?(a(),r("div",at,[t("div",it,[t("div",rt,[t("div",nt,[d(n(Z),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",lt,v(s.value.steam.username||s.value.steam.personaname),1)]),t("div",ct,[d(n(ee),{class:"inline w-4 h-4 flex-shrink-0"}),s.value.steam.profileUrl?(a(),r("a",{key:0,href:s.value.steam.profileUrl,target:"_blank",class:"text-blue-400 hover:underline truncate text-[10px] sm:text-xs"},v(s.value.steam.id),9,dt)):(a(),r("span",ut,v(s.value.steam.id),1))])]),s.value.steam.lastSync?(a(),r("div",mt,[d(n(te),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",ft,v(K(s.value.steam.lastSync)),1)])):u("",!0)])])):u("",!0)])]),t("div",{class:I(["bg-gradient-to-br backdrop-blur-md rounded-xl p-6 relative min-w-0 transition-all duration-300",(f=g.value)!=null&&f.verified?"from-green-700 to-purple-900 ring-2 ring-green-400 shadow-green-400 shadow-lg":B.value?"from-yellow-700 to-purple-900 ring-2 ring-yellow-400 shadow-yellow-400 shadow-lg":"from-purple-800 to-purple-950 ring-1 ring-purple-600 shadow-purple-500 shadow-md"])},[t("div",vt,[d(n(X),{class:I(["w-auto h-[5.5em] transition-all duration-300",(m=g.value)!=null&&m.verified?"text-green-400":B.value?"text-yellow-400":"text-indigo-400"])},null,8,["class"]),R.value&&((b=(_=s.value)==null?void 0:_.discord)==null?void 0:b.avatar)?(a(),r("img",{key:0,src:`https://cdn.discordapp.com/avatars/${s.value.discord.id}/${s.value.discord.avatar}.png`,alt:"Discord Avatar",class:I(["w-auto h-[5.5em] rounded-full border-2 aspect-square transition-all duration-300",(re=g.value)!=null&&re.verified?"border-green-400":B.value?"border-yellow-400":"border-indigo-400"])},null,10,ht)):u("",!0)]),t("div",wt,[t("details",{class:"why",open:!R.value},[...e[12]||(e[12]=[t("summary",{class:"text-white/60 text-sm mt-10 mb-1"},[t("span",{class:"font-bold"},"super secret disco server")],-1),t("div",{class:"text-xs font-light"},[w(" the only way to get in is if you can find the door \u{1F447} "),t("span",{class:"line-through"},"like fightClub")],-1)])],8,pt),R.value?(a(),r("div",yt,[g.value?(a(),r("div",{key:0,class:I(["mb-2 p-3 rounded-lg text-sm",g.value.verified?"bg-green-500/20 text-green-300":"bg-yellow-500/20 text-yellow-300"])},[g.value.verified?(a(),$(n(fe),{key:0,class:"inline w-4 h-4 mr-1 -mt-0.5"})):(a(),$(n(ve),{key:1,class:"inline w-4 h-4 mr-1 -mt-0.5 animate-pulse"})),w(" "+v(g.value.message),1)],2)):u("",!0),(ne=g.value)!=null&&ne.verified?u("",!0):(a(),r("button",{key:1,onClick:Ue,class:"w-full py-3 px-4 rounded-lg font-semibold bg-yellow-600 hover:bg-yellow-700 text-white transition-all duration-200 animate-pulse",disabled:x.value.discordVerify},[x.value.discordVerify?(a(),$(n(A),{key:0,class:"inline w-5 h-5 mr-2 animate-spin"})):u("",!0),e[14]||(e[14]=w(" Check Member Status ",-1))],8,_t)),t("button",{onClick:Ce,class:"w-full py-2 px-4 rounded-lg font-semibold bg-red-600/20 hover:bg-red-600/40 text-red-300 transition-all duration-200 text-sm",disabled:y.value}," Disconnect ",8,bt)])):(a(),r("div",xt,[t("button",{onClick:_e,class:"w-full py-3 px-4 rounded-lg font-semibold bg-indigo-600 hover:bg-indigo-700 text-white transition-all duration-200",disabled:x.value.discord||y.value},[x.value.discord||y.value?(a(),$(n(A),{key:0,class:"inline w-5 h-5 mr-2 animate-spin"})):u("",!0),e[13]||(e[13]=w(" Connect & Join Server ",-1))],8,gt)])),R.value&&((le=s.value)==null?void 0:le.discord)?(a(),r("div",kt,[t("div",St,[t("div",Ut,[t("div",Ct,[d(n(Z),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",It,v(s.value.discord.username),1)]),t("div",Dt,[d(n(ee),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",Rt,v(s.value.discord.id),1)])]),s.value.discord.email||s.value.discord.discriminator?(a(),r("div",$t,[s.value.discord.email?(a(),r("div",Nt,[d(n(he),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",At,v(s.value.discord.email),1)])):u("",!0),s.value.discord.discriminator?(a(),r("div",Lt,[d(n(ze),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",Pt,"#"+v(s.value.discord.discriminator),1)])):u("",!0)])):u("",!0),s.value.discord.lastSync?(a(),r("div",zt,[d(n(te),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",Vt,v(K(s.value.discord.lastSync)),1)])):u("",!0)])])):u("",!0)])],2),t("div",Tt,[t("div",Et,[d(n(Q),{class:"w-auto h-[5.5em] text-purple-400"}),U.value&&((de=(ce=s.value)==null?void 0:ce.twitch)==null?void 0:de.profileImage)?(a(),r("img",{key:0,src:s.value.twitch.profileImage,alt:"Twitch Avatar",class:"w-auto h-[5.5em] rounded-full border-2 border-purple-400 aspect-square"},null,8,Mt)):u("",!0)]),t("div",Bt,[t("details",{class:"why",open:!U.value},[...e[15]||(e[15]=[t("summary",{class:"text-white/60 text-sm mt-10 mb-1"},[t("span",{class:"font-bold"},"live miniGames, instant rewards, & channel vouchers")],-1),t("div",{class:"text-xs font-light"}," play, hangout, and win zCubes (zC) & zBlocks (zB) while watching the stream ",-1)])],8,jt),U.value?(a(),r("button",{key:1,onClick:Ie,class:"w-full py-3 px-4 rounded-lg font-semibold bg-red-600/20 hover:bg-red-600/40 text-red-300 transition-all duration-200",disabled:y.value}," Disconnect ",8,Ot)):(a(),r("button",{key:0,onClick:be,class:"w-full py-3 px-4 rounded-lg font-semibold bg-purple-600 hover:bg-purple-700 text-white transition-all duration-200",disabled:x.value.twitch||y.value},[x.value.twitch||y.value?(a(),$(n(A),{key:0,class:"inline w-5 h-5 mr-2 animate-spin"})):u("",!0),e[16]||(e[16]=w(" Connect ",-1))],8,Ft)),U.value&&((ue=s.value)==null?void 0:ue.twitch)?(a(),r("div",qt,[t("div",Wt,[t("div",Ht,[t("div",Jt,[d(n(Z),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",Yt,v(s.value.twitch.username||s.value.twitch.displayName),1)]),t("div",Gt,[d(n(ee),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",Kt,v(s.value.twitch.id),1)])]),s.value.twitch.displayName&&s.value.twitch.username!==s.value.twitch.displayName||s.value.twitch.email?(a(),r("div",Qt,[s.value.twitch.displayName&&s.value.twitch.username!==s.value.twitch.displayName?(a(),r("div",Xt,[d(n(Ve),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",Zt,v(s.value.twitch.displayName),1)])):u("",!0),s.value.twitch.email?(a(),r("div",es,[d(n(he),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",ts,v(s.value.twitch.email),1)])):u("",!0)])):u("",!0),s.value.twitch.lastSync?(a(),r("div",ss,[d(n(te),{class:"inline w-4 h-4 flex-shrink-0"}),t("span",os,v(K(s.value.twitch.lastSync)),1)])):u("",!0)])])):u("",!0),U.value?(a(),r("div",as,[e[17]||(e[17]=t("label",{class:"text-white/80 text-sm block mb-2"}," Referred By (optional) ",-1)),t("div",is,[Te(t("select",{"onUpdate:modelValue":e[0]||(e[0]=N=>k.value=N),disabled:S.value||L.value||V.value,class:I(["flex-1 px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white text-sm appearance-none cursor-pointer",S.value?"opacity-50 cursor-not-allowed":"focus:outline-none focus:border-purple-400"])},[t("option",ns,v(V.value?"Loading...":"Select who referred you"),1),(a(!0),r(Me,null,Be(ie.value,N=>(a(),r("option",{key:N,value:N,class:"bg-gray-800 text-white"},v(N),9,ls))),128))],10,rs),[[Ee,k.value]]),!S.value&&k.value?(a(),r("button",{key:0,onClick:De,disabled:L.value,class:"px-4 py-2 rounded-lg font-semibold bg-purple-600 hover:bg-purple-700 text-white text-sm transition-all duration-200"},[L.value?(a(),$(n(A),{key:0,class:"inline w-4 h-4 animate-spin"})):(a(),r("span",ds,"Save"))],8,cs)):u("",!0)]),S.value?(a(),r("p",us," \u2713 Referral saved (cannot be changed) ")):(a(),r("p",ms," Who referred you to the channel? "))])):u("",!0)])])]),ge.value?(a(),r("div",fs,[t("h3",vs,[d(n(fe),{class:"inline w-6 h-6 text-green-400 -mt-1 mr-1"}),e[18]||(e[18]=w(" All Accounts Connected! ",-1))]),e[21]||(e[21]=t("p",{class:"text-white/80 mb-2"}," Your gaming profiles are now linked & synced. ",-1)),t("p",hs,[e[19]||(e[19]=w(" Check ",-1)),d(n(X),{class:"inline text-xl -mt-1",title:"discord"}),e[20]||(e[20]=w(" for more info or if you have any questions ",-1))])])):u("",!0),G.value?(a(),r("div",ws,[d(n(A),{class:"inline w-10 h-10 text-white mb-4 animate-spin"}),e[22]||(e[22]=t("p",{class:"text-white"},"Processing authentication...",-1))])):u("",!0),h.value?(a(),r("div",ps,[d(n(ve),{class:"w-10 h-10 text-red-400 mb-4"}),t("p",xs,v(h.value),1),t("button",{onClick:e[1]||(e[1]=N=>h.value=""),class:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded"}," Dismiss ")])):u("",!0)])])}}};typeof we=="function"&&we(pe);const ks=Re(pe,[["__scopeId","data-v-e3c69c93"]]);export{ks as default};
