import{j as u,c as b,w as D,k as j,a as y,b as o,e as d,u as c,M as A,m,v as x,A as L,z as U,t as h,F as V,r as B,S as E,B as C,s as G,q as T,D as N,o as w}from"./index.a096edd2.js";const P={class:"p-4 pt-10"},q={class:"relative flex items-center"},Q={class:"relative flex items-center"},R={disabled:"",value:""},W=["value"],X={class:"flex space-x-4"},z={class:"relative flex items-center w-1/2"},H={class:"relative flex items-center w-1/2"},O=["disabled"],K={__name:"counter",setup(Y){const S=T("gameStore"),{steamLibrary:p,gameStats:f,fetchData:k}=S,v=u(1),a=u(localStorage.getItem("lastSelectedGame")||""),n=u(""),r=u(!1),M=b(()=>f.value?f.value.reduce((s,e)=>{const t=e.players.flatMap(l=>l.entries);return t.length>0?s[e.id]=Math.max(...t.map(l=>l.lives||0)):s[e.id]=0,s},{}):{}),g=b(()=>{const s=M.value[a.value];return(s!==void 0?s:0)+1}),_=b(()=>{if(!p.value||!Array.isArray(p.value))return[];const s=p.value.filter(e=>!e.private&&e.name.toLowerCase().includes(n.value.toLowerCase())).sort((e,t)=>e.name.localeCompare(t.name));return s.length===1&&a.value!==s[0].appID&&N(()=>{a.value=s[0].appID}),s});D(n,()=>{a.value=""}),D(a,s=>{s&&localStorage.setItem("lastSelectedGame",s)}),j(()=>{f.value.length===0&&k()});async function F(){r.value=!0;const s=a.value,e=g.value,t=v.value,l="https://docs.google.com/forms/d/e/1FAIpQLSfW_NpTi2cUWss7yj-c3pmXG4n4QXHq3jv0u0BuEhj35U-0Dw/formResponse",i=new FormData;i.append("entry.1260140789",s),i.append("entry.657657652",e),i.append("entry.1581882803",t);try{await fetch(l,{method:"POST",body:i,mode:"no-cors"}),console.log("Form submitted successfully"),await S.fetchData(!0)}catch(I){console.error("Error submitting form:",I)}finally{r.value=!1}}return(s,e)=>(w(),y("div",P,[e[4]||(e[4]=o("h1",{class:"text-2xl font-bold mb-2"},"\u2620\uFE0F++",-1)),o("form",{onSubmit:G(F,["prevent"]),class:"space-y-4"},[o("div",q,[d(c(A),{class:"absolute left-3 text-gray-400 pointer-events-none"}),m(o("input",{type:"text",id:"game-filter","onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),placeholder:"Filter Games",class:"pl-10 block w-full p-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[x,n.value]])]),o("div",Q,[d(c(L),{class:"absolute left-3 text-gray-400 pointer-events-none"}),m(o("select",{id:"game","onUpdate:modelValue":e[1]||(e[1]=t=>a.value=t),class:"pl-9 block w-full p-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[o("option",R,h(_.value.length)+" games",1),(w(!0),y(V,null,B(_.value,t=>(w(),y("option",{key:t.appID,value:t.appID},h(t.name),9,W))),128))],512),[[U,a.value]])]),o("div",X,[o("div",z,[d(c(E),{class:"absolute left-3 text-gray-400 pointer-events-none"}),m(o("input",{type:"number",id:"count","onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),readonly:"",class:"pl-10 block w-full p-2 bg-gray-800 border border-gray-600 rounded-md shadow-sm sm:text-sm"},null,512),[[x,g.value]])]),o("div",H,[d(c(C),{class:"absolute left-3 text-gray-400 pointer-events-none"}),m(o("input",{type:"number",id:"player","onUpdate:modelValue":e[3]||(e[3]=t=>v.value=t),placeholder:"Player",class:"pl-10 block w-full p-2 bg-gray-700 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[x,v.value]])])]),o("button",{type:"submit",disabled:r.value,class:"inline-flex w-full justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},h(r.value?"Submitting...":"Submit"),9,O)],32)]))}};export{K as default};
