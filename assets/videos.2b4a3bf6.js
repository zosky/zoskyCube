import{_ as I,B as N,r as H,c as _,y as r,b as i,d as t,F as $,q as C,n as w,t as u,j as D,e as L,w as q,g as m,f as W}from"./index.be84e892.js";import{b as T}from"./route-block.6a611cbf.js";const U={class:"bg-gray-800 p-4 rounded-lg"},z={class:"grid grid-cols-7 gap-2 items-start"},G={key:0,class:"month-label absolute text-xs font-bold uppercase text-purple-400"},Z={key:0,class:"ml-1 bg-red-600 text-white rounded-full px-2 text-xs font-normal"},J=["src","alt","onError"],K={key:0,class:"text-center mt-4"},P={__name:"VodsCalendar",setup(F){const A=N("gameStore"),{youtubeVods:f,steamNames:B}=A,k=H(!1),M=_(()=>f.value.reduce((c,d)=>{const a=new Date(d.date).toISOString().split("T")[0];return c[a]||(c[a]=[]),c[a].push(d),c},{})),g=_(()=>f.value.length===0?new Date:new Date(Math.min(...f.value.map(c=>new Date(c.date))))),b=_(()=>{if(f.value.length===0)return[];const c=[],d=new Date(g.value);d.setDate(1);const a=new Date;let n=new Date(a);const v=n.getDay();v!==0&&n.setDate(n.getDate()+(7-v));const x=new Date(d),j=x.getDay(),s=j===0?6:j-1;x.setDate(x.getDate()-s);let e=[];for(;n>=x;){for(let o=0;o<7;o++){const l=n.toISOString().split("T")[0],h=n.getDay();e.push({date:l,dayOfMonth:n.getDate(),isWeekend:h===0||h===6,isFirstOfMonth:n.getDate()===1,monthName:n.toLocaleString("default",{month:"short"}),isToday:l===new Date().toISOString().split("T")[0],games:M.value[l]||[]}),n.setDate(n.getDate()-1)}c.push(...e.reverse()),e=[]}return c}),V=_(()=>k.value?b.value:b.value.slice(0,21)),y=_(()=>Math.max(0,b.value.length-21));function p(c){var n;const d=(n=Object.entries(B.value).find(([v,x])=>x===c))==null?void 0:n[0];if(d)return`https://cdn.akamai.steamstatic.com/steam/apps/${d}/header.jpg`;const a=f.value.find(v=>v.game===c);return a?`https://img.youtube.com/vi/${a.id}/mqdefault.jpg`:""}function S(c,d){d.target.src=`https://img.youtube.com/vi/${c}/mqdefault.jpg`}return(c,d)=>(r(),i("div",U,[d[1]||(d[1]=t("h2",{class:"text-2xl font-bold mb-4 text-white"},"VODs Calendar",-1)),d[2]||(d[2]=t("div",{class:"grid grid-cols-7 gap-1 text-center text-xs text-gray-400 mb-2"},[t("div",null,"Mon"),t("div",null,"Tue"),t("div",null,"Wed"),t("div",null,"Thu"),t("div",null,"Fri"),t("div",null,"Sat"),t("div",null,"Sun")],-1)),t("div",z,[(r(!0),i($,null,C(V.value,a=>(r(),i("div",{key:a.date,class:w(["relative rounded-md p-1 overflow-hidden  ",a.isWeekend?"bg-blue-400/10 shadow-blue-400 shadow-md":"bg-gray-900 shadow-blue-800 shadow-sm",a.isFirstOfMonth?"month-start":"","h-32"])},[a.isFirstOfMonth?(r(),i("div",G,u(a.monthName),1)):D("",!0),t("div",{class:w(["absolute top-1 left-1 text-xs font-bold",a.isToday?"text-blue-400":"text-gray-500"])},[L(u(a.dayOfMonth)+" ",1),a.games.length?(r(),i("label",Z,u(a.games.length)+"v ",1)):D("",!0)],2),a.games.length?(r(),i("div",{key:1,class:w(["games-container mt-4 h-full overflow-y-auto",{"grid grid-cols-2 gap-1":a.games.length>=4}])},[(r(!0),i($,null,C(a.games,n=>(r(),i("div",{key:n.id,class:w([a.games.length<4?"mb-1":"","aspect-[460/215] w-full"])},[t("img",{src:p(n.game),alt:n.game,class:"w-full h-full object-cover rounded-sm",onError:v=>S(n.id,v)},null,40,J)],2))),128))],2)):D("",!0)],2))),128))]),y.value>0?(r(),i("div",K,[t("button",{onClick:d[0]||(d[0]=a=>k.value=!k.value),class:"text-blue-400 hover:text-blue-300"}," Show "+u(y.value)+" more days ",1)])):D("",!0)]))}},Q=I(P,[["__scopeId","data-v-4db7fa7e"]]);const X={class:"min-h-screen bg-gray-900 text-white p-4 pt-10"},Y={key:0,class:"flex justify-center items-center h-64"},tt={key:1,class:"text-red-400 text-center p-4"},et={key:2,class:"max-w-full"},st={key:0,class:"mb-8 mx-auto"},ot={class:"xl:flex xl:gap-6"},lt={class:"xl:w-3/4"},at={class:"aspect-video bg-black rounded-lg overflow-hidden mb-4"},nt=["src"],rt={class:"bg-gray-800 rounded-lg p-4"},it={class:"text-xl font-bold mb-2"},ct={class:"text-gray-300 text-sm"},dt={key:0,class:"xl:w-1/4 mt-6 xl:mt-0"},ut={class:"bg-gray-800 rounded-lg overflow-hidden h-full"},gt={class:"p-4 border-b border-gray-700"},mt={class:"text-lg font-semibold flex items-center gap-2"},ft={class:"text-sm text-gray-400"},ht={class:"relative xl:h-[calc(100vh-20rem)]"},vt={class:"h-full xl:h-[calc(100vh-20rem)] overflow-y-auto scrollable-related p-4"},pt={class:"space-y-3 h-full"},_t=["onClick"],bt={class:"flex flex-col space-y-2"},xt={class:"relative w-full h-20 bg-black rounded overflow-hidden"},yt=["src","alt"],wt={class:"text-sm text-gray-300 font-medium"},Dt={class:"overflow-x-auto pb-4"},kt={class:"flex gap-6",style:{width:"max-content"}},Vt={class:"relative"},St=["onClick"],jt=["src","alt"],$t={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/90 to-transparent p-4"},Ct={class:"text-lg font-bold text-white mb-2"},Mt={class:"flex justify-between items-center text-sm"},Ot={class:"flex items-center gap-1 text-gray-300"},At={class:"flex items-center gap-1 text-gray-400"},Bt={class:"flex justify-between items-center"},Ht={class:"text-xs text-gray-400"},Lt={class:"text-xs text-gray-400"},Tt={class:"relative h-96"},It={class:"h-full overflow-y-auto scrollable-videos p-3"},Nt={class:"space-y-2"},Et=["onClick"],Ft={class:"flex items-center space-x-3"},Rt={class:"relative w-16 h-12 bg-black rounded overflow-hidden flex-shrink-0"},qt=["src","alt"],Wt={class:"flex-1 min-w-0"},Ut={class:"text-sm text-gray-300 truncate font-medium"},zt={class:"flex justify-between items-center"},Gt={class:"text-xs text-gray-400"},Zt={class:"text-xs text-gray-400"},Jt={class:"mt-8 text-center text-gray-400"},E={__name:"videos",setup(F){const A=N("gameStore"),{youtubeVods:f,steamNames:B,isLoading:k,error:M}=A,g=H(null),b=H(null);_(()=>{let s=[...f.value];return b.value&&(s=s.filter(e=>e.game===b.value)),s.sort((e,o)=>new Date(o.date)-new Date(e.date))});const V=_(()=>[...new Set(f.value.map(e=>e.game))].sort((e,o)=>{const l=p(e),h=p(o);return new Date(h.date)-new Date(l.date)}));function y(s){return f.value.filter(e=>e.game===s).sort((e,o)=>new Date(o.date)-new Date(e.date))}function p(s){return y(s).sort((o,l)=>new Date(l.date)-new Date(o.date))[0]}function S(s){g.value=s}function c(s){if(!s)return"Unknown date";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return s}}q(f,s=>{if(s.length>0&&!g.value){const e=[...s].sort((o,l)=>new Date(l.date)-new Date(o.date));g.value=e[0]}},{immediate:!0}),_(()=>b.value?[b.value]:V.value);const d=_(()=>f.value.length);function a(s){var l;const e=(l=Object.entries(B.value).find(([h,O])=>O===s))==null?void 0:l[0];return e?`https://cdn.akamai.steamstatic.com/steam/apps/${e}/header.jpg`:`https://img.youtube.com/vi/${p(s).id}/maxresdefault.jpg`}function n(s){const e=s.target,o=e.alt,l=p(o);e.src=`https://img.youtube.com/vi/${l.id}/maxresdefault.jpg`}function v(){return g.value?f.value.filter(s=>s.game===g.value.game).sort((s,e)=>new Date(e.date)-new Date(s.date)):[]}function x(s){if(!s)return"N/A";try{return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return s}}function j(s){if(s==null)return"";const e=Math.floor(s/3600),o=Math.floor(s%3600/60),l=Math.floor(s%60),h=e>0?`${e}:`:"",O=o.toString().padStart(2,"0"),R=l.toString().padStart(2,"0");return`${h}${O}:${R}`}return(s,e)=>(r(),i("div",X,[m(k)?(r(),i("div",Y,[...e[0]||(e[0]=[t("div",{class:"text-lg"},"Loading videos...",-1)])])):m(M)?(r(),i("div",tt," Error: "+u(m(M)),1)):(r(),i("div",et,[W(Q,{class:"my-4"}),m(g)?(r(),i("div",st,[t("div",ot,[t("div",lt,[t("div",at,[t("iframe",{src:`https://www.youtube.com/embed/${m(g).id}?autoplay=0&rel=0`,class:"w-full h-full",frameborder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,nt)]),t("div",rt,[t("h2",it,u(m(g).game),1),t("p",ct,u(c(m(g).date)),1)])]),m(g)?(r(),i("div",dt,[t("div",ut,[t("div",gt,[t("h3",mt,[e[1]||(e[1]=t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"})],-1)),L(" More "+u(m(g).game),1)]),t("p",ft,u(v().length)+" videos",1)]),t("div",ht,[t("div",vt,[t("div",pt,[(r(!0),i($,null,C(v(),o=>{var l;return r(),i("div",{key:o.id,class:w(["bg-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-600 transition-colors group",{"ring-2 ring-blue-500 bg-blue-900/30":((l=m(g))==null?void 0:l.id)===o.id}]),onClick:h=>S(o)},[t("div",bt,[t("div",xt,[t("img",{src:`https://img.youtube.com/vi/${o.id}/mqdefault.jpg`,alt:o.game,class:"w-full h-full object-cover"},null,8,yt),e[2]||(e[2]=t("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50"},[t("div",{class:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-white ml-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M8 5v10l8-5-8-5z"})])])],-1))]),t("div",null,[t("p",wt,u(c(o.date)),1)])])],10,_t)}),128))])]),e[3]||(e[3]=t("div",{class:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none"},null,-1))])])])):D("",!0)])])):D("",!0),t("div",Dt,[t("div",kt,[(r(!0),i($,null,C(m(V),o=>(r(),i("div",{key:o,class:"flex-none w-80 bg-gray-800 rounded-lg overflow-hidden"},[t("div",Vt,[t("div",{class:"w-full h-48 bg-black cursor-pointer group",onClick:l=>S(p(o))},[t("img",{src:a(o),alt:o,class:"w-full h-full object-cover",onError:n},null,40,jt),e[4]||(e[4]=t("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50"},[t("div",{class:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center"},[t("svg",{class:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M8 5v10l8-5-8-5z"})])])],-1))],8,St),t("div",$t,[t("h3",Ct,u(o),1),t("div",Mt,[t("div",Ot,[e[5]||(e[5]=t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z"})],-1)),L(" "+u(y(o).length),1)]),t("div",At,[e[6]||(e[6]=t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"})],-1)),t("div",Bt,[t("p",Ht,u(x(p(o).date)),1),t("p",Lt,u(j(p(o).duration)),1)])])])])]),t("div",Tt,[t("div",It,[t("div",Nt,[(r(!0),i($,null,C(y(o),l=>{var h;return r(),i("div",{key:l.id,class:w(["bg-gray-700 rounded-lg p-2 cursor-pointer hover:bg-gray-600 transition-colors group",{"ring-2 ring-blue-500 bg-blue-900/30":((h=m(g))==null?void 0:h.id)===l.id}]),onClick:O=>S(l)},[t("div",Ft,[t("div",Rt,[t("img",{src:`https://img.youtube.com/vi/${l.id}/mqdefault.jpg`,alt:l.game,class:"w-full h-full object-cover"},null,8,qt),e[7]||(e[7]=t("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50"},[t("div",{class:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center"},[t("svg",{class:"w-3 h-3 text-white ml-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M8 5v10l8-5-8-5z"})])])],-1))]),t("div",Wt,[t("p",Ut,u(l.game),1),t("div",zt,[t("p",Gt,u(c(l.date)),1)]),t("p",Zt,u(j(l.duration)),1)])])],10,Et)}),128))])]),e[8]||(e[8]=t("div",{class:"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-gray-800 to-transparent pointer-events-none"},null,-1))])]))),128))])]),t("div",Jt,[t("p",null,u(m(V).length)+" games \u2022 "+u(m(d))+" total videos",1)])]))]))}};typeof T=="function"&&T(E);const Qt=I(E,[["__scopeId","data-v-209bfddf"]]);export{Qt as default};
