import{_ as Qe,u as We,r as v,c as O,o as je,a as qe,w as we,b as n,d as t,e as $,f as x,g as r,t as i,h as De,v as Xe,i as Fe,j as w,n as y,k as P,S as ee,l as ke,E as He,m as ne,p as Ze,F as D,q as B,s as F,P as G,x as Se,T as et,y as a,z as tt}from"./index.be84e892.js";import{b as Pe}from"./route-block.6a611cbf.js";const st={class:"mx-auto p-4 max-w-7xl"},ot={class:"mt-6"},rt={class:"text-gray-400"},lt={class:"text-yellow-400 font-semibold"},at={key:0,class:"text-center py-16"},nt={key:1,class:"bg-red-900/50 border border-red-500 text-red-300 px-6 py-4 rounded-lg"},it={class:"text-sm"},ct={key:2},dt={class:"mb-6 flex flex-wrap gap-4 items-center justify-between bg-gray-900/50 p-4 rounded-lg"},ut={class:"flex items-center gap-4"},gt={class:"relative"},pt={class:"flex rounded-lg overflow-hidden border border-blue-800"},ht={class:"text-sm text-gray-400"},vt={class:"text-cyan-400 font-bold"},yt={class:"text-yellow-400 font-bold"},ft={class:"flex items-center gap-2"},bt=["title"],xt=["title"],mt={key:0,class:"flex items-center gap-4"},_t={class:"flex items-center gap-2"},wt=["onClick"],kt={key:0,class:"text-xs"},St={key:0,class:"mb-6"},Ct={class:"text-yellow-400 font-bold mb-3 flex items-center gap-2"},It={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 xl:grid-cols-9 gap-2"},Lt=["onClick"],$t={class:"relative aspect-[16/9] bg-gray-800"},Et=["src","alt","onError"],At=["onClick"],Nt={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/70 to-transparent px-1.5 py-1"},jt=["title"],qt={class:"flex justify-between items-center mt-0.5"},Dt={class:"text-[9px] text-yellow-400"},Ft={key:1,class:"mb-6"},Ht={class:"text-gray-400 font-bold mb-3 flex items-center gap-2"},Pt={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 xl:grid-cols-9 gap-2"},zt=["onClick"],Tt={class:"relative aspect-[16/9] bg-gray-800"},Ut=["src","alt","onError"],Vt=["onClick"],Rt={class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/70 to-transparent px-1.5 py-1"},Ot=["title"],Bt={class:"flex justify-between items-center mt-0.5"},Mt={class:"text-[9px] text-gray-400"},Jt={key:2,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"},Gt=["onClick"],Kt={class:"bg-gray-800 relative overflow-hidden"},Yt=["src","alt","onError"],Qt={key:0,class:"absolute top-2 left-2 px-2 py-1 bg-yellow-500 text-black rounded text-xs font-bold"},Wt={class:"p-3 bg-gray-950 border-t border-gray-800"},Xt=["title"],Zt={class:"flex justify-between items-center text-sm"},es={class:"flex items-center gap-1"},ts={class:"flex items-center gap-1"},ss=["onClick","title"],os=["onClick","title"],rs=["href"],ls={key:3,class:"overflow-x-auto rounded-lg border border-gray-800"},as={class:"w-full text-sm"},ns={class:"bg-gray-900 text-gray-400"},is={class:"divide-y divide-gray-800"},cs=["onClick"],ds={class:"px-4 py-3"},us={class:"flex items-center gap-3"},gs=["src","alt","onError"],ps={class:"text-white font-medium"},hs={key:0,class:"ml-2 text-yellow-500 text-xs"},vs={class:"px-4 py-3 text-center"},ys={class:"text-gray-600"},fs={class:"px-4 py-3 text-right"},bs={class:"px-4 py-3 text-center text-gray-500"},xs={class:"px-4 py-3 text-center"},ms={class:"flex items-center justify-center gap-2"},_s=["onClick","title"],ws=["onClick","title"],ks=["href"],Ss={key:4,class:"text-center py-16 text-gray-500"},Cs={class:"bg-gray-900 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden border border-cyan-500/50 shadow-2xl shadow-cyan-500/20"},Is={class:"flex justify-between items-start p-4 border-b border-gray-800"},Ls={class:"text-2xl font-bold text-white"},$s={class:"text-gray-400 text-sm mt-1"},Es={class:"p-4 overflow-y-auto max-h-[60vh]"},As={key:0,class:"text-center py-8"},Ns={key:1},js={class:"mb-6"},qs={class:"aspect-video bg-black rounded-lg overflow-hidden mb-3"},Ds=["src","alt"],Fs={class:"flex gap-2 overflow-x-auto pb-2"},Hs=["onClick"],Ps=["src"],zs=["onClick"],Ts=["src"],Us={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},Vs={class:"bg-gray-800 rounded-lg p-3"},Rs={class:"text-white font-bold"},Os={key:0,class:"text-green-400 text-xs ml-1"},Bs={class:"bg-gray-800 rounded-lg p-3"},Ms={class:"text-white font-bold"},Js={class:"bg-gray-800 rounded-lg p-3"},Gs={class:"text-white text-sm line-clamp-1"},Ks={class:"bg-gray-800 rounded-lg p-3"},Ys={class:"text-white text-sm line-clamp-1"},Qs={key:0,class:"bg-gray-800 rounded-lg p-4 mb-4"},Ws=["innerHTML"],Xs={key:2,class:"text-center py-8 text-gray-500"},Zs={class:"text-sm"},eo={class:"p-4 bg-gray-950 border-t border-gray-800 flex flex-wrap items-center justify-between gap-4"},to={class:"flex items-center gap-6"},so={class:"font-bold"},oo={class:"text-gray-500 text-sm"},ro={class:"flex items-center gap-2"},lo={class:"flex items-center gap-3"},ao=["href"],ze="668816ac484cab966df79977",Te={__name:"store",setup(no){const{user:io,userProfile:K,loading:Ce}=We(),Ue=`https://api.streamelements.com/kappa/v2/store/${ze}/items`,Ve=`https://api.streamelements.com/kappa/v2/points/${ze}`,T=v(null),Ie=v(!1),M=v([]),ie=v(!0),te=v(null),k=v("grid"),E=v("cost"),A=v("desc"),Y=v(!1),C=v(""),N=v(new Set(JSON.parse(localStorage.getItem("store_favorites")||"[]"))),j=v(new Set(JSON.parse(localStorage.getItem("store_hidden")||"[]"))),U=v(!0),V=v(!1),ce=s=>{!s||(N.value.has(s)?N.value.delete(s):N.value.add(s),N.value=new Set(N.value),localStorage.setItem("store_favorites",JSON.stringify([...N.value])))},de=s=>{!s||(j.value.has(s)?j.value.delete(s):j.value.add(s),j.value=new Set(j.value),localStorage.setItem("store_hidden",JSON.stringify([...j.value])))},H=s=>s&&N.value.has(s),J=s=>s&&j.value.has(s),S=v(null),d=v(null),ue=v(!1),Q=v(null),m=v(null),Le=v(null),ge=new Map,Re=[{key:"cost",label:"Price"},{key:"name",label:"Name"},{key:"createdAt",label:"Date"},{key:"quantity",label:"Stock"}],pe=O(()=>{let s=M.value.filter(e=>e.enabled);if(C.value.trim()){const e=C.value.toLowerCase().trim();s=s.filter(l=>(l.name||"").toLowerCase().includes(e)||(l.description||"").toLowerCase().includes(e))}return Y.value&&T.value!==null&&(s=s.filter(e=>(e.cost||0)<=T.value)),V.value||(s=s.filter(e=>{var l;return!j.value.has((l=e.bot)==null?void 0:l.identifier)})),s}),Oe=O(()=>M.value.filter(s=>{var e;return s.enabled&&N.value.has((e=s.bot)==null?void 0:e.identifier)}).length),Be=O(()=>M.value.filter(s=>{var e;return s.enabled&&j.value.has((e=s.bot)==null?void 0:e.identifier)}).length);function he(s){return[...s].sort((e,l)=>{var L,o,u,h;let c,p;switch(E.value){case"name":c=((L=e.name)==null?void 0:L.toLowerCase())||"",p=((o=l.name)==null?void 0:o.toLowerCase())||"";break;case"cost":c=e.cost||0,p=l.cost||0;break;case"createdAt":c=new Date(e.createdAt).getTime(),p=new Date(l.createdAt).getTime();break;case"quantity":c=((u=e.quantity)==null?void 0:u.current)||0,p=((h=l.quantity)==null?void 0:h.current)||0;break;default:return 0}if(E.value==="name"){const b=c.localeCompare(p);return A.value==="asc"?b:-b}const I=c-p;return A.value==="asc"?I:-I})}const ve=O(()=>{let s=M.value.filter(e=>{var l;return e.enabled&&N.value.has((l=e.bot)==null?void 0:l.identifier)});if(C.value.trim()){const e=C.value.toLowerCase().trim();s=s.filter(l=>(l.name||"").toLowerCase().includes(e)||(l.description||"").toLowerCase().includes(e))}return he(s)}),ye=O(()=>{let s=M.value.filter(e=>{var l;return e.enabled&&j.value.has((l=e.bot)==null?void 0:l.identifier)});if(C.value.trim()){const e=C.value.toLowerCase().trim();s=s.filter(l=>(l.name||"").toLowerCase().includes(e)||(l.description||"").toLowerCase().includes(e))}return he(s)}),Me=O(()=>pe.value.reduce((s,e)=>{var l;return s+(((l=e.quantity)==null?void 0:l.current)||0)},0)),fe=O(()=>{let s=[...pe.value];return k.value==="grid"&&U.value&&(s=s.filter(e=>{var l;return!N.value.has((l=e.bot)==null?void 0:l.identifier)})),he(s)});function W(s){E.value===s?A.value=A.value==="asc"?"desc":"asc":(E.value=s,A.value="asc")}function se(s){return E.value!==s?"":A.value==="asc"?"\u2191":"\u2193"}function Je(s){if(!s)return"N/A";const e=new Date(s);return e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:e.getFullYear()!==new Date().getFullYear()?"numeric":void 0})}function be(s){var c;const l=(((c=s.bot)==null?void 0:c.identifier)||"").replace("steam","");return l&&/^\d+$/.test(l)?`https://store.steampowered.com/app/${l}`:"https://store.steampowered.com"}function xe(s){var c;const l=(((c=s.bot)==null?void 0:c.identifier)||"").match(/steam(\d+)/);return l?l[1]:null}function oe(s){const e=xe(s);return e?`https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/${e}/header.jpg`:"https://via.placeholder.com/460x215?text=No+Image"}function re(s,e){const l=xe(e);l&&!s.target.src.includes("steamstatic")?s.target.src=`https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/${l}/header.jpg`:s.target.src="https://via.placeholder.com/460x215?text=No+Image"}async function le(s){var l,c,p,I;S.value=s,d.value=null,Q.value=null,m.value=null;const e=xe(s);if(!e){Q.value="No Steam App ID found";return}if(ge.has(e)){d.value=ge.get(e),$e();return}ue.value=!0;try{const o=`https://us-central1-zoskycube-bossbattle.cloudfunctions.net/getSteamAppDetails?appid=${e}`,u=await fetch(o);if(!u.ok)throw new Error(`API error: ${u.status}`);const b=(await u.json())[e];if(!(b!=null&&b.success))throw new Error("Game not found");const f=b.data,z={name:f.name,header_image:f.header_image,short_description:f.short_description,is_free:f.is_free,price_overview:f.price_overview,release_date:f.release_date,developers:f.developers||[],publishers:f.publishers||[],genres:((l=f.genres)==null?void 0:l.map(g=>g.description))||[],categories:((c=f.categories)==null?void 0:c.map(g=>g.description))||[],movies:((p=f.movies)==null?void 0:p.map(g=>({id:g.id,name:g.name,thumbnail:g.thumbnail,hls_h264:g.hls_h264||null,dash_h264:g.dash_h264||null,dash_av1:g.dash_av1||null,mp4:g.mp4,webm:g.webm})))||[],screenshots:((I=f.screenshots)==null?void 0:I.slice(0,8).map(g=>({id:g.id,path_thumbnail:g.path_thumbnail,path_full:g.path_full})))||[]};ge.set(e,z),d.value=z,$e()}catch(L){console.error("Failed to fetch Steam data:",L),Q.value=L.message}finally{ue.value=!1}}function $e(){var s,e;if(!!d.value)if(((s=d.value.movies)==null?void 0:s.length)>0){const l=d.value.movies[0];m.value={type:"video",src:me(l),thumbnail:l.thumbnail}}else((e=d.value.screenshots)==null?void 0:e.length)>0?m.value={type:"image",src:d.value.screenshots[0].path_full}:m.value={type:"image",src:d.value.header_image}}function me(s){var e,l,c,p;return s.hls_h264?s.hls_h264:(e=s.mp4)!=null&&e.max?s.mp4.max:(l=s.mp4)!=null&&l["480"]?s.mp4[480]:(c=s.webm)!=null&&c.max?s.webm.max:(p=s.webm)!=null&&p["480"]?s.webm[480]:null}function Ge(s){return s&&s.includes(".m3u8")}let _=null;async function Ke(){return window.Hls?window.Hls:new Promise((s,e)=>{const l=document.createElement("script");l.src="https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js",l.onload=()=>{console.log("\u2705 HLS.js loaded"),s(window.Hls)},l.onerror=()=>e(new Error("Failed to load HLS.js")),document.head.appendChild(l)})}async function Ye(s,e){try{const l=await Ke();l.isSupported()?(_&&_.destroy(),_=new l({enableWorker:!0,lowLatencyMode:!1}),_.loadSource(e),_.attachMedia(s),_.on(l.Events.MANIFEST_PARSED,()=>{s.play().catch(c=>console.warn("Autoplay blocked:",c))}),_.on(l.Events.ERROR,(c,p)=>{console.error("HLS error:",p),p.fatal&&ae()})):s.canPlayType("application/vnd.apple.mpegurl")?(s.src=e,s.play().catch(c=>console.warn("Autoplay blocked:",c))):(console.error("HLS not supported"),ae())}catch(l){console.error("Failed to play HLS:",l),ae()}}function Ee(s){m.value=s}function ae(){var s,e;console.warn("Video failed to load, falling back to screenshot"),((e=(s=d.value)==null?void 0:s.screenshots)==null?void 0:e.length)>0&&(m.value={type:"image",src:d.value.screenshots[0].path_full})}function _e(){_&&(_.destroy(),_=null),S.value=null,d.value=null,m.value=null}async function Ae(){ie.value=!0,te.value=null;try{console.log("\u{1F3EA} Fetching StreamElements store items...");const s=await fetch(Ue);if(!s.ok)throw new Error(`API error: ${s.status}`);const e=await s.json();console.log(`\u{1F4E6} Loaded ${e.length} store items`),M.value=e}catch(s){console.error("\u274C Failed to fetch store items:",s),te.value=s.message}finally{ie.value=!1}}async function Ne(s){if(!!s){Ie.value=!0;try{console.log(`\u{1F4B0} Fetching points for ${s}...`);const e=await fetch(`${Ve}/${s.toLowerCase()}`);if(!e.ok)throw new Error(`API error: ${e.status}`);const l=await e.json();T.value=l.points||0,console.log(`\u{1F4B0} ${s} has ${T.value} points`)}catch(e){console.error("\u274C Failed to fetch user points:",e),T.value=null}finally{Ie.value=!1}}}return je(()=>{var p,I;Ae(),(I=(p=K.value)==null?void 0:p.twitch)!=null&&I.username&&Ne(K.value.twitch.username);const s=localStorage.getItem("store_view_mode");s&&(k.value=s);const e=localStorage.getItem("store_sort_key");e&&(E.value=e);const l=localStorage.getItem("store_sort_direction");l&&(A.value=l);const c=L=>{L.key==="Escape"&&S.value&&_e()};window.addEventListener("keydown",c),qe(()=>window.removeEventListener("keydown",c))}),we([k,E,A],()=>{localStorage.setItem("store_view_mode",k.value),localStorage.setItem("store_sort_key",E.value),localStorage.setItem("store_sort_direction",A.value)}),we(()=>{var s,e;return(e=(s=K.value)==null?void 0:s.twitch)==null?void 0:e.username},s=>{console.log("\u{1F3EA} Store: userProfile watch triggered, username:",s,"authLoading:",Ce.value,"userProfile:",K.value),s&&T.value===null&&Ne(s)},{immediate:!0}),je(()=>{console.log("\u{1F3EA} Store: Mounted - authLoading:",Ce.value,"userProfile:",K.value),console.log("\u{1F3EA} Store: localStorage linkUuid:",localStorage.getItem("linkUuid"))}),we(m,async s=>{if((s==null?void 0:s.type)==="video"&&s.src){await tt();const e=Le.value;if(!e)return;Ge(s.src)?Ye(e,s.src):(e.src=s.src,e.play().catch(l=>console.warn("Autoplay blocked:",l)))}},{immediate:!1}),qe(()=>{_&&(_.destroy(),_=null)}),(s,e)=>{var l,c,p,I,L;return a(),n("div",st,[t("div",ot,[e[17]||(e[17]=t("h1",{class:"text-3xl font-bold mb-2 text-cyan-400"},"\u{1F3EA} Reward Store",-1)),t("p",rt,[e[14]||(e[14]=$(" Spend your ",-1)),t("span",lt,[x(G,{currency:"zC",class:"w-6"})]),e[15]||(e[15]=$(" on Steam games! ",-1)),e[16]||(e[16]=t("a",{href:"https://streamelements.com/zoskycube/store",target:"_blank",class:"text-blue-400 hover:text-blue-300 ml-2"}," Visit StreamElements Store \u2192 ",-1))])]),r(ie)?(a(),n("div",at,[...e[18]||(e[18]=[t("div",{class:"animate-spin text-6xl mb-4"},"\u{1F3AE}",-1),t("p",{class:"text-gray-400"},"Loading store items...",-1)])])):r(te)?(a(),n("div",nt,[e[19]||(e[19]=t("p",{class:"font-bold"},"Failed to load store",-1)),t("p",it,i(r(te)),1),t("button",{onClick:Ae,class:"mt-3 px-4 py-2 bg-red-700 hover:bg-red-600 rounded text-white text-sm"}," Retry ")])):(a(),n("div",ct,[t("div",dt,[t("div",ut,[t("div",gt,[De(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>Fe(C)?C.value=o:null),type:"text",placeholder:"Search games...",class:"w-48 px-3 py-2 pl-9 bg-gray-800 border border-gray-700 rounded-lg text-white text-sm placeholder-gray-500 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500"},null,512),[[Xe,r(C)]]),e[20]||(e[20]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"},"\u{1F50D}",-1)),r(C)?(a(),n("button",{key:0,onClick:e[1]||(e[1]=o=>C.value=""),class:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white"}," \u2715 ")):w("",!0)]),t("div",pt,[t("button",{onClick:e[2]||(e[2]=o=>k.value="grid"),class:y([r(k)==="grid"?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700","px-4 py-2 text-sm font-medium transition-colors"])}," \u25A6 Grid ",2),t("button",{onClick:e[3]||(e[3]=o=>k.value="table"),class:y([r(k)==="table"?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700","px-4 py-2 text-sm font-medium transition-colors"])}," \u2261 Table ",2)]),t("div",ht,[t("span",vt,i(r(pe).length),1),e[21]||(e[21]=$(" items ",-1)),e[22]||(e[22]=t("span",{class:"mx-2"},"\u2022",-1)),t("span",yt,i(r(Me)),1),e[23]||(e[23]=$(" keys available ",-1))]),t("div",ft,[t("button",{onClick:e[4]||(e[4]=o=>U.value=!r(U)),class:y([r(U)?"bg-yellow-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700","px-3 py-1.5 text-sm rounded transition-colors flex items-center gap-1"]),title:r(U)?"Favorites highlighted":"Favorites not highlighted"},[r(U)?(a(),P(r(ee),{key:0,class:"w-4 h-4"})):(a(),P(r(ke),{key:1,class:"w-4 h-4"})),t("span",null,i(r(Oe)),1)],10,bt),t("button",{onClick:e[5]||(e[5]=o=>V.value=!r(V)),class:y([r(V)?"bg-gray-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700","px-3 py-1.5 text-sm rounded transition-colors flex items-center gap-1"]),title:r(V)?"Showing hidden items":"Hidden items are hidden"},[r(V)?(a(),P(r(He),{key:0,class:"w-4 h-4"})):(a(),P(r(ne),{key:1,class:"w-4 h-4"})),t("span",null,i(r(Be)),1)],10,xt)])]),r(k)==="grid"?(a(),n("div",mt,[r(T)!==null?(a(),n("label",{key:0,class:y(["flex items-center gap-2 cursor-pointer text-sm",r(Y)?"text-green-400":"text-gray-400"])},[De(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=o=>Fe(Y)?Y.value=o:null),class:"w-4 h-4 rounded bg-gray-700 border-gray-600 text-green-500 focus:ring-green-500 cursor-pointer"},null,512),[[Ze,r(Y)]]),e[24]||(e[24]=t("span",null,"Can Afford",-1))],2)):w("",!0),t("div",_t,[e[25]||(e[25]=t("span",{class:"text-gray-500 text-sm"},"Sort:",-1)),(a(),n(D,null,B(Re,o=>t("button",{key:o.key,onClick:u=>W(o.key),class:y([r(E)===o.key?"bg-cyan-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700","px-3 py-1.5 text-sm rounded transition-colors flex items-center gap-1"])},[$(i(o.label)+" ",1),r(E)===o.key?(a(),n("span",kt,i(r(A)==="asc"?"\u2191":"\u2193"),1)):w("",!0)],10,wt)),64))])])):w("",!0)]),r(k)==="grid"&&r(U)&&r(ve).length>0?(a(),n("div",St,[t("h3",Ct,[x(r(ee),{class:"w-5 h-5"}),$(" Favorites ("+i(r(ve).length)+") ",1)]),t("div",It,[(a(!0),n(D,null,B(r(ve),o=>(a(),n("div",{key:"fav-"+o._id,onClick:u=>le(o),class:"relative rounded-lg overflow-hidden border border-yellow-500/40 hover:border-yellow-400 transition-all hover:scale-105 shadow-lg hover:shadow-yellow-500/20 cursor-pointer group"},[t("div",$t,[t("img",{src:o.thumbnail||oe(o),alt:o.name,class:"w-full h-full object-cover",loading:"lazy",onError:u=>re(u,o)},null,40,Et),t("button",{onClick:F(u=>{var h;return ce((h=o.bot)==null?void 0:h.identifier)},["stop"]),class:"absolute top-1 right-1 text-yellow-400 hover:text-yellow-300 bg-black/60 rounded p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove from favorites"},[x(r(ee),{class:"w-3.5 h-3.5"})],8,At),t("div",Nt,[t("h4",{class:"text-white text-[10px] font-medium line-clamp-1 leading-tight",title:o.name},i(o.name),9,jt),t("div",qt,[t("span",{class:y(["text-[9px]",o.quantity.current>0?"text-green-400":"text-red-400"])}," \u{1F511}"+i(o.quantity.current),3),t("span",Dt,[x(G,{currency:"zC",n:o.cost},null,8,["n"])])])])])],8,Lt))),128))])])):w("",!0),r(k)==="grid"&&r(V)&&r(ye).length>0?(a(),n("div",Ft,[t("h3",Ht,[x(r(ne),{class:"w-5 h-5"}),$(" Hidden ("+i(r(ye).length)+") ",1)]),t("div",Pt,[(a(!0),n(D,null,B(r(ye),o=>(a(),n("div",{key:"hidden-"+o._id,onClick:u=>le(o),class:"relative rounded-lg overflow-hidden border border-gray-700/40 hover:border-gray-500 transition-all hover:scale-105 shadow-lg cursor-pointer opacity-50 hover:opacity-100 group"},[t("div",Tt,[t("img",{src:o.thumbnail||oe(o),alt:o.name,class:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all",loading:"lazy",onError:u=>re(u,o)},null,40,Ut),t("button",{onClick:F(u=>{var h;return de((h=o.bot)==null?void 0:h.identifier)},["stop"]),class:"absolute top-1 right-1 text-gray-400 hover:text-white bg-black/60 rounded p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",title:"Unhide item"},[x(r(He),{class:"w-3.5 h-3.5"})],8,Vt),t("div",Rt,[t("h4",{class:"text-gray-300 text-[10px] font-medium line-clamp-1 leading-tight",title:o.name},i(o.name),9,Ot),t("div",Bt,[t("span",{class:y(["text-[9px]",o.quantity.current>0?"text-green-400":"text-red-400"])}," \u{1F511}"+i(o.quantity.current),3),t("span",Mt,[x(G,{currency:"zC",n:o.cost},null,8,["n"])])])])])],8,zt))),128))])])):w("",!0),r(k)==="grid"?(a(),n("div",Jt,[(a(!0),n(D,null,B(r(fe),o=>{var u,h,b,f,z,g,X,R;return a(),n("div",{key:o._id,onClick:q=>le(o),class:y(["bg-gray-900 rounded-lg overflow-hidden border transition-all hover:scale-105 shadow-lg cursor-pointer",{"border-yellow-500/50 ring-1 ring-yellow-500/30 hover:shadow-yellow-500/20":H((u=o.bot)==null?void 0:u.identifier),"border-gray-800 hover:border-cyan-500 hover:shadow-cyan-500/20":!H((h=o.bot)==null?void 0:h.identifier),"opacity-50":J((b=o.bot)==null?void 0:b.identifier)}])},[t("div",Kt,[t("img",{src:o.thumbnail||oe(o),alt:o.name,class:"w-full h-fit object-fit aspect-[16/9]",loading:"lazy",onError:q=>re(q,o)},null,40,Yt),o.featured?(a(),n("div",Qt," \u2B50 Featured ")):w("",!0)]),t("div",Wt,[t("h3",{class:"font-bold text-white text-sm line-clamp-1 mb-2",title:o.name},i(o.name),9,Xt),t("div",Zt,[t("span",{class:y(["flex items-center gap-1",o.quantity.current>0?"text-green-400":"text-red-400"])}," \u{1F511} "+i(o.quantity.current),3),t("span",es,[e[26]||(e[26]=$(" \u{1F4B0} ",-1)),x(G,{currency:"zC",n:o.cost},null,8,["n"])]),t("div",ts,[t("button",{onClick:F(q=>{var Z;return ce((Z=o.bot)==null?void 0:Z.identifier)},["stop"]),class:y([H((f=o.bot)==null?void 0:f.identifier)?"text-yellow-400":"text-gray-500 hover:text-yellow-400","transition-colors"]),title:H((z=o.bot)==null?void 0:z.identifier)?"Remove from favorites":"Add to favorites"},[H((g=o.bot)==null?void 0:g.identifier)?(a(),P(r(ee),{key:0,class:"w-5 h-5"})):(a(),P(r(ke),{key:1,class:"w-5 h-5"}))],10,ss),t("button",{onClick:F(q=>{var Z;return de((Z=o.bot)==null?void 0:Z.identifier)},["stop"]),class:y([J((X=o.bot)==null?void 0:X.identifier)?"text-red-400":"text-gray-500 hover:text-red-400","transition-colors"]),title:J((R=o.bot)==null?void 0:R.identifier)?"Unhide item":"Hide item"},[x(r(ne),{class:"w-5 h-5"})],10,os),t("a",{href:be(o),target:"_blank",onClick:e[7]||(e[7]=F(()=>{},["stop"])),class:"text-blue-400 hover:text-blue-300",title:"View on Steam"},[x(r(Se),{class:"w-5 h-5"})],8,rs)])])])],10,Gt)}),128))])):(a(),n("div",ls,[t("table",as,[t("thead",ns,[t("tr",null,[t("th",{onClick:e[8]||(e[8]=o=>W("name")),class:"px-4 py-3 text-left cursor-pointer hover:text-cyan-400 transition-colors"}," Name "+i(se("name")),1),t("th",{onClick:e[9]||(e[9]=o=>W("quantity")),class:"px-4 py-3 text-center cursor-pointer hover:text-cyan-400 transition-colors"}," \u{1F511} Stock "+i(se("quantity")),1),t("th",{onClick:e[10]||(e[10]=o=>W("cost")),class:"px-4 py-3 text-right cursor-pointer hover:text-cyan-400 transition-colors"}," \u{1F4B0} Price "+i(se("cost")),1),t("th",{onClick:e[11]||(e[11]=o=>W("createdAt")),class:"px-4 py-3 text-center cursor-pointer hover:text-cyan-400 transition-colors"}," Added "+i(se("createdAt")),1),e[27]||(e[27]=t("th",{class:"px-4 py-3 text-center"},"Actions",-1))])]),t("tbody",is,[(a(!0),n(D,null,B(r(fe),o=>{var u,h,b,f,z,g,X;return a(),n("tr",{key:o._id,onClick:R=>le(o),class:y(["bg-gray-950 hover:bg-gray-900 transition-colors cursor-pointer",{"opacity-50":o.quantity.current===0,"ring-1 ring-yellow-500/30 bg-yellow-950/20":H((u=o.bot)==null?void 0:u.identifier),"opacity-40":J((h=o.bot)==null?void 0:h.identifier)}])},[t("td",ds,[t("div",us,[t("img",{src:o.thumbnail||oe(o),alt:o.name,class:"w-12 h-8 object-cover rounded",loading:"lazy",onError:R=>re(R,o)},null,40,gs),t("div",null,[t("span",ps,i(o.name),1),o.featured?(a(),n("span",hs,"\u2B50")):w("",!0)])])]),t("td",vs,[t("span",{class:y([o.quantity.current>0?"text-green-400":"text-red-400","font-medium"])},i(o.quantity.current),3),t("span",ys,"/"+i(o.quantity.total),1)]),t("td",fs,[x(G,{currency:"zC",n:o.cost},null,8,["n"])]),t("td",bs,i(Je(o.createdAt)),1),t("td",xs,[t("div",ms,[t("button",{onClick:F(R=>{var q;return ce((q=o.bot)==null?void 0:q.identifier)},["stop"]),class:y([H((b=o.bot)==null?void 0:b.identifier)?"text-yellow-400":"text-gray-500 hover:text-yellow-400","transition-colors"]),title:H((f=o.bot)==null?void 0:f.identifier)?"Remove from favorites":"Add to favorites"},[H((z=o.bot)==null?void 0:z.identifier)?(a(),P(r(ee),{key:0,class:"w-5 h-5 inline"})):(a(),P(r(ke),{key:1,class:"w-5 h-5 inline"}))],10,_s),t("button",{onClick:F(R=>{var q;return de((q=o.bot)==null?void 0:q.identifier)},["stop"]),class:y([J((g=o.bot)==null?void 0:g.identifier)?"text-red-400":"text-gray-500 hover:text-red-400","transition-colors"]),title:J((X=o.bot)==null?void 0:X.identifier)?"Unhide item":"Hide item"},[x(r(ne),{class:"w-5 h-5 inline"})],10,ws),t("a",{href:be(o),target:"_blank",onClick:e[12]||(e[12]=F(()=>{},["stop"])),class:"text-blue-400 hover:text-blue-300",title:"View on Steam"},[x(r(Se),{class:"w-5 h-5 inline"})],8,ks),t("a",{href:"https://streamelements.com/zoskycube/store",target:"_blank",onClick:e[13]||(e[13]=F(()=>{},["stop"])),class:"text-cyan-400 hover:text-cyan-300",title:"Buy on StreamElements"}," \u{1F6D2} ")])])],10,cs)}),128))])])])),r(fe).length===0?(a(),n("div",Ss,[...e[28]||(e[28]=[t("p",{class:"text-4xl mb-4"},"\u{1F3EA}",-1),t("p",null,"No items available in the store right now.",-1)])])):w("",!0)])),(a(),P(et,{to:"body"},[r(S)?(a(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:F(_e,["self"])},[t("div",Cs,[t("div",Is,[t("div",null,[t("h2",Ls,i(r(S).name),1),t("p",$s,i(r(S).description||"No description available"),1)]),t("button",{onClick:_e,class:"text-gray-400 hover:text-white text-2xl leading-none"}," \u2715 ")]),t("div",Es,[r(ue)?(a(),n("div",As,[...e[29]||(e[29]=[t("div",{class:"animate-spin text-4xl mb-2"},"\u{1F3AE}",-1),t("p",{class:"text-gray-400"},"Loading Steam data...",-1)])])):r(d)?(a(),n("div",Ns,[t("div",js,[t("div",qs,[((l=r(m))==null?void 0:l.type)==="video"?(a(),n("video",{ref_key:"videoPlayer",ref:Le,key:r(m).src,class:"w-full h-full",controls:"",muted:"",playsinline:"",onError:ae},null,32)):(a(),n("img",{key:1,src:((c=r(m))==null?void 0:c.src)||r(d).header_image,alt:r(S).name,class:"w-full h-full aspect-[16/9]"},null,8,Ds))]),t("div",Fs,[(a(!0),n(D,null,B(r(d).movies,(o,u)=>{var h;return a(),n("div",{key:"movie-"+o.id,onClick:b=>Ee({type:"video",src:me(o),thumbnail:o.thumbnail}),class:y(["flex-shrink-0 w-24 h-14 rounded overflow-hidden cursor-pointer border-2 transition-colors relative",((h=r(m))==null?void 0:h.src)===me(o)?"border-cyan-400":"border-gray-700 hover:border-gray-500"])},[t("img",{src:o.thumbnail,class:"w-full h-full object-cover"},null,8,Ps),e[30]||(e[30]=t("div",{class:"absolute inset-0 flex items-center justify-center bg-black/40"},[t("span",{class:"text-white text-xl"},"\u25B6")],-1))],10,Hs)}),128)),(a(!0),n(D,null,B(r(d).screenshots,(o,u)=>{var h;return a(),n("div",{key:"ss-"+o.id,onClick:b=>Ee({type:"image",src:o.path_full}),class:y(["flex-shrink-0 w-24 h-14 rounded overflow-hidden cursor-pointer border-2 transition-colors",((h=r(m))==null?void 0:h.src)===o.path_full?"border-cyan-400":"border-gray-700 hover:border-gray-500"])},[t("img",{src:o.path_thumbnail,class:"w-full h-full object-cover"},null,8,Ts)],10,zs)}),128))])]),t("div",Us,[t("div",Vs,[e[31]||(e[31]=t("div",{class:"text-gray-400 text-xs mb-1"},"Steam Price",-1)),t("div",Rs,[r(d).is_free?(a(),n(D,{key:0},[$("Free")],64)):r(d).price_overview?(a(),n(D,{key:1},[$(i(r(d).price_overview.final_formatted)+" ",1),r(d).price_overview.discount_percent>0?(a(),n("span",Os," -"+i(r(d).price_overview.discount_percent)+"% ",1)):w("",!0)],64)):(a(),n(D,{key:2},[$("N/A")],64))])]),t("div",Bs,[e[32]||(e[32]=t("div",{class:"text-gray-400 text-xs mb-1"},"Release Date",-1)),t("div",Ms,i(((p=r(d).release_date)==null?void 0:p.date)||"N/A"),1)]),t("div",Js,[e[33]||(e[33]=t("div",{class:"text-gray-400 text-xs mb-1"},"Genres",-1)),t("div",Gs,i(((I=r(d).genres)==null?void 0:I.slice(0,3).join(", "))||"N/A"),1)]),t("div",Ks,[e[34]||(e[34]=t("div",{class:"text-gray-400 text-xs mb-1"},"Developer",-1)),t("div",Ys,i(((L=r(d).developers)==null?void 0:L[0])||"N/A"),1)])]),r(d).short_description?(a(),n("div",Qs,[t("p",{class:"text-gray-300 text-sm",innerHTML:r(d).short_description},null,8,Ws)])):w("",!0)])):r(Q)?(a(),n("div",Xs,[e[35]||(e[35]=t("p",{class:"text-4xl mb-2"},"\u{1F615}",-1)),e[36]||(e[36]=t("p",null,"Could not load Steam data",-1)),t("p",Zs,i(r(Q)),1)])):w("",!0)]),t("div",eo,[t("div",to,[t("span",{class:y(["flex items-center gap-2",r(S).quantity.current>0?"text-green-400":"text-red-400"])},[e[37]||(e[37]=t("span",{class:"text-lg"},"\u{1F511}",-1)),t("span",so,i(r(S).quantity.current),1),t("span",oo,"/ "+i(r(S).quantity.total),1)],2),t("span",ro,[e[38]||(e[38]=t("span",{class:"text-lg"},"\u{1F4B0}",-1)),x(G,{currency:"zC",n:r(S).cost,class:"text-xl"},null,8,["n"])])]),t("div",lo,[t("a",{href:be(r(S)),target:"_blank",class:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-blue-400 transition-colors"},[x(r(Se),{class:"w-5 h-5"}),e[39]||(e[39]=t("span",null,"Steam",-1))],8,ao),e[40]||(e[40]=t("a",{href:"https://streamelements.com/zoskycube/store",target:"_blank",class:"flex items-center gap-2 px-6 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-white font-bold transition-colors"}," \u{1F6D2} Buy Now ",-1))])])])])):w("",!0)]))])}}};typeof Pe=="function"&&Pe(Te);const go=Qe(Te,[["__scopeId","data-v-e6cab4c1"]]);export{go as default};
