import{b}from"./route-block.6a611cbf.js";import{_ as G,B as N,o as j,c as D,b as o,d as a,g as l,j as i,t as p,F as x,q as y,y as n}from"./index.be84e892.js";const E={class:"p-2"},L={key:0,class:"text-center"},F={key:1,class:"text-center text-red-500"},K={key:2,class:"grid grid-cols-1 md:flex md:flex-row flex-wrap gap-4"},M={class:"text-sm font-semibold mb-2"},C={class:"space-y-2"},V={class:"absolute -top-1 -left-3 bg-blue-900 rounded-xl px-2 text-xs"},q=["src"],O={class:"absolute -bottom-1 -right-2"},T={key:0,class:"text-2xl"},v={__name:"winning",setup(U){const _=N("gameStore"),{winningGames:g,steamNames:w,isLoading:h,error:m}=_;j(()=>{_.fetchData()});const k=t=>{if(t>3&&t<21)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`;default:return`${t}th`}},B=D(()=>{if(!g.value.length)return{};const t={};g.value.forEach(e=>{const s=new Date(e.Timestamp),u=s.getFullYear(),I=s.getMonth(),$=s.getDate(),d=`${u}-${String(I+1).padStart(2,"0")}`;t[d]||(t[d]={monthName:s.toLocaleString("default",{month:"long",year:"numeric"}),games:[]});const f=t[d].games.find(S=>S.steamId===e.steamId);f?f.completedByBoth=!0:t[d].games.push({steamId:e.steamId,name:w.value[e.steamId]||`Unknown Game (${e.steamId})`,day:$,completedByBoth:!1})});for(const e in t)t[e].games.sort((s,u)=>s.day-u.day);const r=Object.keys(t).sort().reverse(),c={};return r.forEach(e=>{c[e]=t[e]}),c});return(t,r)=>(n(),o("div",E,[r[1]||(r[1]=a("h1",{class:"text-2xl font-bold mt-8 mb-1"},"Completed Games",-1)),l(h)?(n(),o("div",L,[...r[0]||(r[0]=[a("p",null,"Loading...",-1)])])):i("",!0),l(m)?(n(),o("div",F,[a("p",null,"Error loading data: "+p(l(m)),1)])):i("",!0),!l(h)&&!l(m)?(n(),o("div",K,[(n(!0),o(x,null,y(l(B),(c,e)=>(n(),o("div",{key:e,class:"bg-gray-800 p-2 rounded-lg shadow-lg border-2 border-blue-500/50 inline-block w-full md:w-40 mb-4"},[a("h2",M,p(c.monthName),1),a("ul",C,[(n(!0),o(x,null,y(c.games,s=>(n(),o("li",{key:s.steamId,class:"relative"},[a("span",V,p(k(s.day)),1),a("img",{src:`https://steamcdn-a.akamaihd.net/steam/apps/${s.steamId}/header.jpg`,class:"w-full h-auto rounded"},null,8,q),a("div",O,[s.completedByBoth?(n(),o("span",T," \u{1F465} ")):i("",!0)])]))),128))])]))),128))])):i("",!0)]))}};typeof b=="function"&&b(v);const z=G(v,[["__scopeId","data-v-3d16b30c"]]);export{z as default};
